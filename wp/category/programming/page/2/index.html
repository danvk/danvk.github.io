 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">


<!-- Mirrored from www.danvk.org/wp/category/programming/page/2/ by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 15 Oct 2014 03:17:50 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head profile="http://gmpg.org/xfn/11">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<meta name="generator" content="WordPress 3.9.2" /> <!-- leave this for stats please -->
	<title>danvk.org &raquo; programming</title>
	<style type="text/css" media="screen">
		@import url( ../../../../wp-content/themes/ocadia/style.css);
			</style>
	<link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="../../../../feed/index.html" />
	<link rel="alternate" type="text/xml" title="RSS .92" href="../../../../feed/rss/index.html" />
	<link rel="alternate" type="application/atom+xml" title="Atom 0.3" href="../../../../feed/atom/index.html" />
	<link rel="pingback" href="../../../../xmlrpc.php" />
    	<link rel='archives' title='October 2014' href='../../../../2014/10/index.html' />
	<link rel='archives' title='August 2014' href='../../../../2014/08/index.html' />
	<link rel='archives' title='July 2014' href='../../../../2014/07/index.html' />
	<link rel='archives' title='June 2014' href='../../../../2014/06/index.html' />
	<link rel='archives' title='March 2014' href='../../../../2014/03/index.html' />
	<link rel='archives' title='February 2014' href='../../../../2014/02/index.html' />
	<link rel='archives' title='January 2014' href='../../../../2014/01/index.html' />
	<link rel='archives' title='August 2013' href='../../../../2013/08/index.html' />
	<link rel='archives' title='June 2013' href='../../../../2013/06/index.html' />
	<link rel='archives' title='April 2013' href='../../../../2013/04/index.html' />
	<link rel='archives' title='March 2013' href='../../../../2013/03/index.html' />
	<link rel='archives' title='February 2013' href='../../../../2013/02/index.html' />
	<link rel='archives' title='January 2013' href='../../../../2013/01/index.html' />
	<link rel='archives' title='December 2012' href='../../../../2012/12/index.html' />
	<link rel='archives' title='September 2012' href='../../../../2012/09/index.html' />
	<link rel='archives' title='August 2012' href='../../../../2012/08/index.html' />
	<link rel='archives' title='July 2012' href='../../../../2012/07/index.html' />
	<link rel='archives' title='June 2012' href='../../../../2012/06/index.html' />
	<link rel='archives' title='May 2012' href='../../../../2012/05/index.html' />
	<link rel='archives' title='April 2012' href='../../../../2012/04/index.html' />
	<link rel='archives' title='February 2012' href='../../../../2012/02/index.html' />
	<link rel='archives' title='January 2012' href='../../../../2012/01/index.html' />
	<link rel='archives' title='December 2011' href='../../../../2011/12/index.html' />
	<link rel='archives' title='November 2011' href='../../../../2011/11/index.html' />
	<link rel='archives' title='August 2011' href='../../../../2011/08/index.html' />
	<link rel='archives' title='March 2011' href='../../../../2011/03/index.html' />
	<link rel='archives' title='June 2010' href='../../../../2010/06/index.html' />
	<link rel='archives' title='March 2010' href='../../../../2010/03/index.html' />
	<link rel='archives' title='December 2009' href='../../../../2009/12/index.html' />
	<link rel='archives' title='November 2009' href='../../../../2009/11/index.html' />
	<link rel='archives' title='October 2009' href='../../../../2009/10/index.html' />
	<link rel='archives' title='September 2009' href='../../../../2009/09/index.html' />
	<link rel='archives' title='August 2009' href='../../../../2009/08/index.html' />
	<link rel='archives' title='June 2009' href='../../../../2009/06/index.html' />
	<link rel='archives' title='May 2009' href='../../../../2009/05/index.html' />
	<link rel='archives' title='March 2009' href='../../../../2009/03/index.html' />
	<link rel='archives' title='February 2009' href='../../../../2009/02/index.html' />
	<link rel='archives' title='January 2009' href='../../../../2009/01/index.html' />
	<link rel='archives' title='December 2008' href='../../../../2008/12/index.html' />
	<link rel='archives' title='November 2008' href='../../../../2008/11/index.html' />
	<link rel='archives' title='October 2008' href='../../../../2008/10/index.html' />
	<link rel='archives' title='September 2008' href='../../../../2008/09/index.html' />
	<link rel='archives' title='August 2008' href='../../../../2008/08/index.html' />
	<link rel='archives' title='June 2008' href='../../../../2008/06/index.html' />
	<link rel='archives' title='May 2008' href='../../../../2008/05/index.html' />
	<link rel='archives' title='February 2008' href='../../../../2008/02/index.html' />
	<link rel='archives' title='January 2008' href='../../../../2008/01/index.html' />
	<link rel='archives' title='December 2007' href='../../../../2007/12/index.html' />
	<link rel='archives' title='November 2007' href='../../../../2007/11/index.html' />
	<link rel='archives' title='October 2007' href='../../../../2007/10/index.html' />
	<link rel='archives' title='September 2007' href='../../../../2007/09/index.html' />
	<link rel='archives' title='August 2007' href='../../../../2007/08/index.html' />
	<link rel='archives' title='July 2007' href='../../../../2007/07/index.html' />
	<link rel='archives' title='June 2007' href='../../../../2007/06/index.html' />
	<link rel='archives' title='May 2007' href='../../../../2007/05/index.html' />
	<link rel='archives' title='April 2007' href='../../../../2007/04/index.html' />
	<link rel='archives' title='March 2007' href='../../../../2007/03/index.html' />
	<link rel='archives' title='February 2007' href='../../../../2007/02/index.html' />
	<link rel='archives' title='January 2007' href='../../../../2007/01/index.html' />
	<link rel='archives' title='December 2006' href='../../../../2006/12/index.html' />
	<link rel='archives' title='November 2006' href='../../../../2006/11/index.html' />
	<link rel='archives' title='October 2006' href='../../../../2006/10/index.html' />
	<link rel='archives' title='September 2006' href='../../../../2006/09/index.html' />
	<link rel="alternate" type="application/rss+xml" title="danvk.org &raquo; programming Category Feed" href="../../feed/index.html" />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="../../../../xmlrpc0db0.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="../../../../wp-includes/wlwmanifest.xml" /> 
<meta name="generator" content="WordPress 3.9.2" />
<style type="text/css">
/* <![CDATA[ */
img.latex { vertical-align: middle; border: none; }
/* ]]> */
</style>
<style type="text/css" id="syntaxhighlighteranchor"></style>
</head>
	
<body>

<div id="wrapper">

<div id="header">
<h1><a href="http://www.danvk.org/wp">danvk.org</a></h1>
<p>Keepin&#8217; static like wool fabric since 2006</p>
</div>

<div id="content">

			
				
		<div class="post">

			<h1 class="storydate">01.20.12</h1> 
			<h2 id="post-824" class="storytitle"><a href="../../../../2012-01-20/accurate-hexadecimal-to-decimal-conversion-in-javascript/index.html" rel="bookmark" title="Permanent link to Accurate hexadecimal to decimal conversion in JavaScript">Accurate hexadecimal to decimal conversion in JavaScript</a></h2>
			<p class="meta">Posted in <a href="../../../javascript/index.html" title="View all posts in javascript" rel="category tag">javascript</a>, <a href="../../index.html" title="View all posts in programming" rel="category tag">programming</a> at 4:05 pm by danvk</p>
		
							<p>A problem came up at work yesterday: I was creating a web page that received 64-bit hex numbers from one API. But it needed to pass them off to another API that expected decimal numbers.</p>
<p>Usually this would not be a problem &mdash; JavaScript has built-in functions for converting between hex and decimal:</p>
<p><code>parseInt("1234abcd", 16) = 305441741<br />
(305441741).toString(16) = "1234abcd"</code></p>
<p>Unfortunately, for larger numbers, there&#8217;s a big problem lurking:</p>
<p><code>parseInt("123456789abcd<u>ef</u>", 16) = 81985529216486900<br />
(81985529216486900).toString(16) = "123456789abcd<u>f0</u>"<br />
</code></p>
<p>The last two digits are wrong. Why did these functions stop being inverses of one another?</p>
<p>The answer has to do with how JavaScript stores numbers. It uses 64-bit floating point representation for all numbers, even integers. This means that integers larger than 2^53 cannot be represented precisely. You can see this by evaluating:</p>
<p><code>(Math.pow(2, 53) + 1) - 1 = 9007199254740991</code></p>
<p>That ends with a 1, so whatever it is, it&#8217;s certainly not a power of 2. (It&#8217;s off by one).</p>
<p>To solve this problem, I wrote some very simple hex &lt;-&gt; decimal conversion functions which use arbitrary precision arithmetic. In particular, these will work for 64-bit numbers or 128-bit numbers. The code is only about 65 lines, so it&#8217;s much more lightweight than a full-fledged library for arbitrary precision arithmetic.</p>
<p>The algorithm is pretty cool. You can see a demo, read an explanation and get the code here:<br />
<a href="http://danvk.org/hex2dec.html">http://danvk.org/hex2dec.html</a>.</p>
			
			<p class="feedback">
			<a href="../../../../2012-01-20/accurate-hexadecimal-to-decimal-conversion-in-javascript/index.html" rel="bookmark" title="Permanent link to Accurate hexadecimal to decimal conversion in JavaScript" class="permalink">Permalink</a>
			<span class="commentslink">Comments off</span>						</p>
			
			<!--
			<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
			xmlns:dc="http://purl.org/dc/elements/1.1/"
			xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
		<rdf:Description rdf:about="http://www.danvk.org/wp/2012-01-20/accurate-hexadecimal-to-decimal-conversion-in-javascript/"
    dc:identifier="http://www.danvk.org/wp/2012-01-20/accurate-hexadecimal-to-decimal-conversion-in-javascript/"
    dc:title="Accurate hexadecimal to decimal conversion in JavaScript"
    trackback:ping="http://www.danvk.org/wp/2012-01-20/accurate-hexadecimal-to-decimal-conversion-in-javascript/trackback/" />
</rdf:RDF>			-->

			</div>
	
				
		<div class="post">

			<h1 class="storydate">12.19.11</h1> 
			<h2 id="post-782" class="storytitle"><a href="../../../../2011-12-19/takeaways-stanfords-machine-learning-class/index.html" rel="bookmark" title="Permanent link to Takeaways from Stanford&#8217;s Machine Learning Class">Takeaways from Stanford&#8217;s Machine Learning Class</a></h2>
			<p class="meta">Posted in <a href="../../../math/index.html" title="View all posts in math" rel="category tag">math</a>, <a href="../../index.html" title="View all posts in programming" rel="category tag">programming</a> at 5:04 pm by danvk</p>
		
							<p>Over the past two months, I&#8217;ve participated in Andrew Ng&#8217;s online <a href="http://ml-class.org/">Stanford Machine learning class</a>. It&#8217;s a very high-level overview of the field with an emphasis on applications and techniques, rather than theory. Since I just finished the last assignment, it&#8217;s a fine time to write down my thoughts on the class!</p>
<p>Overall, I&#8217;ve learned quite a bit about how <a href="http://en.wikipedia.org/wiki/Machine_learning">ML</a> is used in practice. Some highlights for me:</p>
<style type="text/css">ul.body-list li { padding-bottom: 10px; }</style>
<ul class="body-list">
<li><a href="http://en.wikipedia.org/wiki/Gradient_descent">Gradient descent</a> is a very general optimization technique. If you can calculate a function and its partial derivatives, you can use gradient descent. I was particularly impressed with the way we  used it to train Neural Networks. We learned how the networks operated, but had no need to think about how to train them &mdash; we just used gradient descent.
<li>There are <a href="http://en.wikipedia.org/wiki/BFGS_method">many</a> advanced &#8220;unconstrained optimization&#8221; algorithms which can be used as alternatives to gradient descent. These often have the advantage that you don&#8217;t need to tune parameters like a learning rate.
<li><a href="http://en.wikipedia.org/wiki/Regularization_(machine_learning)">Regularization</a> is used almost universally. I&#8217;d previously had very negative associations with using high-order polynomial features, since I most often saw them used in examples of overfitting. But I realize now that they are quite reasonable to add if you also make good use of regularization.
<li>The <a href="http://en.wikipedia.org/wiki/Backpropagation">backpropagation algorithm</a> for <a href="http://en.wikipedia.org/wiki/Artificial_neural_network">Neural Networks</a> is really just an efficient way to compute partial derivatives (for use by gradient descent and co).
<li>Learning curves (plots of train/test error as a function of the number of examples) are a great way to figure out how to improve your ML algorithm. For example, if your training and test errors are both high, it means that you&#8217;re not overfitting your data set and there&#8217;s no point in gathering more data. What it does mean is that you need to add more features (e.g. the polynomial which I used to fear) in order to increase your performance.
</ul>
<p>The other takeaway is that, as in many fields, there are many &#8220;tricks of the trade&#8221; in Machine Learning. These are bits of knowledge that aren&#8217;t part of the core theory, but which are still enormously helpful for solving real-world problems.</p>
<p>As an example, consider the last problem in the course: Photo OCR. The problem is to take an image like this:</p>
<p><img src="../../../../wp-content/uploads/2011/12/photo-ocr-e1324338543864.png" alt="Example of Photo OCR" title="photo-ocr" width="531" height="362" class="aligncenter size-full wp-image-783" /></p>
<p>and extract all the text: &#8220;LULA B&#8217;s ANTIQUE MALL&#8221;, &#8220;LULA B&#8217;s&#8221;, &#8220;OPEN&#8221; and &#8220;Lula B&#8217;s&#8221;. Initially, this seems quite daunting. Machine Learning is clearly relevant here, but how do you break it down into concrete problems which can be attacked using ML techniques? You don&#8217;t know where the text is and you don&#8217;t even have a rough idea of the text&#8217;s size.</p>
<p>This is where the &#8220;tricks&#8221; come in. <a href="http://en.wikipedia.org/wiki/Binary_classification">Binary classifiers</a> are the &#8220;hammer&#8221; of ML. You can write a binary classifier to determine whether a fixed-size rectangle contains text:</p>
<table>
<tr>
<td><i>Positive examples</i></td>
<td><img src="../../../../wp-content/uploads/2011/12/text-negative.png" alt="" title="text-positive" width="383" height="75" class="alignleft size-full wp-image-785" /></td>
</tr>
<tr>
<td><i>Negative examples</i></td>
<td><img src="../../../../wp-content/uploads/2011/12/text-positive.png" alt="" title="text-negative" width="384" height="75" class="alignleft size-full wp-image-784" /></td>
</tr>
</table>
<p>You then run this classifier over thousands of different &#8220;windows&#8221; in the main image. This tells you where all the bits of text are. If you ignore all the non-contiguous areas, you have a pretty good sense of the bounding boxes for the text in the image.</p>
<p>But even given the text boxes, how do you recognize the characters? Time for another trick! We can build a binary classifier to detect a gap between letters in the center of a fixed-size rectangle:</p>
<table>
<tr>
<td><i>Positive examples</i></td>
<td><img src="../../../../wp-content/uploads/2011/12/split-positive.png" alt="" title="split-positive" width="143" height="94" class="alignleft size-full wp-image-791" /></td>
</tr>
<tr>
<td><i>Negative examples</i></td>
<td><img src="../../../../wp-content/uploads/2011/12/split-negative.png" alt="" title="split-negative" width="143" height="94" class="alignleft size-full wp-image-791" /></td>
</tr>
</table>
<p>If we slide this along, it will tell us where each character starts and ends. So we can chop the text box up into character boxes. Once we&#8217;ve done that, classifying characters in a fixed-size rectangle is another concrete problem which can be tackled with Neural Networks or the like.</p>
<p>In an ML class, you&#8217;re presented with this pipeline of ML algorithms for the Photo OCR problem. It makes sense. It reduces the real-world problem into three nice clean, theoretical problems. In the class, you&#8217;d likely spend most of your time talking about those three concrete problems. In retrospect, the pipeline seems as natural as could be.</p>
<p>But if you were given the Photo OCR problem in the real world, you might never come up with this breakdown. Unless you knew the trick! And the only way to learn tricks like this is to see them used. And that&#8217;s my final takeaway from this practical ML class: familiarity with a vastly larger set of ML tricks.</p>
			
			<p class="feedback">
			<a href="../../../../2011-12-19/takeaways-stanfords-machine-learning-class/index.html" rel="bookmark" title="Permanent link to Takeaways from Stanford&#8217;s Machine Learning Class" class="permalink">Permalink</a>
			<a href="../../../../2011-12-19/takeaways-stanfords-machine-learning-class/index.html#comments" class="commentslink"  title="Comment on Takeaways from Stanford&#8217;s Machine Learning Class">1 Comment</a>						</p>
			
			<!--
			<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
			xmlns:dc="http://purl.org/dc/elements/1.1/"
			xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
		<rdf:Description rdf:about="http://www.danvk.org/wp/2011-12-19/takeaways-stanfords-machine-learning-class/"
    dc:identifier="http://www.danvk.org/wp/2011-12-19/takeaways-stanfords-machine-learning-class/"
    dc:title="Takeaways from Stanford&#8217;s Machine Learning Class"
    trackback:ping="http://www.danvk.org/wp/2011-12-19/takeaways-stanfords-machine-learning-class/trackback/" />
</rdf:RDF>			-->

			</div>
	
				
		<div class="post">

			<h1 class="storydate">11.05.11</h1> 
			<h2 id="post-765" class="storytitle"><a href="../../../../2011-11-05/java-ten-years-later/index.html" rel="bookmark" title="Permanent link to Java, Ten Years Later">Java, Ten Years Later</a></h2>
			<p class="meta">Posted in <a href="../../index.html" title="View all posts in programming" rel="category tag">programming</a> at 1:33 pm by danvk</p>
		
							<p>It&#8217;s been almost ten years since I&#8217;ve actively used the <a href="http://en.wikipedia.org/wiki/Java_(programming_language)">Java</a> programming language. In the mean time, I&#8217;ve mostly used <a href="http://en.wikipedia.org/wiki/C++">C++</a>. I&#8217;ve had to pick up a bit of Java again recently. Here are a few of the things that I found surprising or notable. These are all variants on &#8220;that&#8217;s changed in the last ten years&#8221; or &#8220;that&#8217;s not how C++ does it.&#8221;</p>
<p><b>The Java compiler enforces what would be conventions in C++.</b><br />
For example, &#8220;public class Foo&#8221; has to be in Foo.java. In C++, this would just be a convention. You can use &#8220;private class&#8221; when you&#8217;re playing around with test code and want to use only a single file. Similarly, class foo.Bar needs to be in &#8220;foo/Bar.java&#8221;.</p>
<p><b>Java Packages are a more pervasive concept than namespaces in C++.</b><br />
There&#8217;s a &#8220;default package&#8221;, but using this prevents you from loading classes by name: Class.fromName(&#8220;Foo&#8221;) won&#8217;t work, but Class.fromName(&#8220;package.Foo&#8221;) will. Classes in your current package are auto-imported, which surprised me at first. The default visibility for methods/fields in Java is &#8220;package private&#8221;, which has no analogue in C++.</p>
<p><b>Java keeps much more type information at runtime time than C++ does.</b><br />
The reflection features (Class.getMethods(), Method.getParameters(), etc.) have no equivalent in C++. This leads to some seemingly-magical behaviors, e.g. naming a method &#8220;foo&#8221; in a Servlet can cause it to be served at &#8220;/foo&#8221; without you saying anything else. Not all information is kept though: you can get a list of all packages, but not a list of all classes in a package. You can request a class by its name, but you can&#8217;t get a list of all classes. You can get a list of all the method names in a class, but you can&#8217;t get a list of all the parameter names in a method.</p>
<p><b>Java enums are far richer than C/C++ enums.</b><br />
enums in Java are more like classes: they can have constructors, methods, fields, even per-value method implementations. I really like this. Examples:</p>
<p><code>public enum Suit {<br />
&nbsp; CLUB("C"), DIAMOND("D"), HEART("S"), SPADE("S");<br />
&nbsp; private String shortName;<br />
&nbsp; private Suit(shortName) { this.shortName = shortName; }<br />
&nbsp; public String toString() { return shortName; }<br />
}<br />
</code></p>
<p><b>Java is OK with a two-tier type system.</b><br />
At its core, C++ is an attempt to put user-defined types on an equal footing with built-in types like int and char. This is in no way a goal of Java, which is quite content to have a two-tier system of primitive and non-primitive types. This means that you can&#8217;t do Map&lt;int, int&gt;, for instance. You have to do Map&lt;Integer, Integer&gt;. Autoboxing makes this less painful, but it&#8217;s still a wart in the language that you have to be aware of.</p>
<p>One concrete example of this is the &#8220;array[index]&#8221; notation. In C++, this is also used for maps. There&#8217;s no way to do this in Java, and I really miss it. Compare:</p>
<p><code>map[key] += 1;</code></p>
<p>to</p>
<p><code>map.put(key, 1 + map.get(key));</code></p>
<p>which has more boilerplate and is more error-prone, since you might accidentally do:</p>
<p><code>map.put(key, 1 + other_map.get(key));</code></p>
<p><b>The designers of Java Generics learned from the chaos of C++ templates.</b><br />
Generic classes in Java are always templated on types: no more insane error messages. You can even say what interface the type has to implement. And there&#8217;s no equivalent of method specialization, a C++ feature which is often misused.</p>
<p><b>Variables/fields in Java behave more like C++ pointers than C++ values.</b><br />
This is a particular gotcha for a field. For example, in C++:</p>
<p><code>class C {<br />
&nbsp;public:<br />
&nbsp; C() {<br />
&nbsp; &nbsp; // foo_ is already constructed and usable here.<br />
&nbsp; }<br />
&nbsp;private:<br />
&nbsp; Foo foo_;<br />
};<br />
</code></p>
<p>But in Java:</p>
<p><code>class C {<br />
&nbsp; public C() {<br />
&nbsp; &nbsp; // foo is null here. We have to do foo = new Foo();<br />
&nbsp; }<br />
&nbsp; private Foo foo;<br />
}<br />
</code></p>
<p><b>Java constructors always require a trailing (), even if they take no parameters.</b><br />
This is a minor gotcha, but one I find myself running into frequently. It&#8217;s &#8220;new Foo()&#8221; instead of &#8220;new Foo&#8221; (which is acceptable in C++).</p>
<p><b>The Java foreach loop is fantastic</b><br />
Compare</p>
<p><code>for (String arg : args) { ... }</code></p>
<p>to</p>
<p><code>for (Set&lt;string&gt;::const_iterator it = args.begin(); it != args.end(); ++it) { ... }</code></p>
<p><b>The &#8220;static {}&#8221; construct is nice</b><br />
This lets you write code to initialize static variables. It has no clear analogue in C++. To use the Suit example above,</p>
<p><code>private static HashMap&lt;String, Suit&gt; name_to_suit;<br />
static {<br />
&nbsp; for (Suit s : Suit.values()) { name_to_suit.put(s.toString(), s); }<br />
}<br />
</code></p>
<p>The new features (Generics, enums, autoboxing) that Java has gained in the last ten years make it much more pleasant to use.</p>
			
			<p class="feedback">
			<a href="../../../../2011-11-05/java-ten-years-later/index.html" rel="bookmark" title="Permanent link to Java, Ten Years Later" class="permalink">Permalink</a>
			<a href="../../../../2011-11-05/java-ten-years-later/index.html#comments" class="commentslink"  title="Comment on Java, Ten Years Later">3 Comments</a>						</p>
			
			<!--
			<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
			xmlns:dc="http://purl.org/dc/elements/1.1/"
			xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
		<rdf:Description rdf:about="http://www.danvk.org/wp/2011-11-05/java-ten-years-later/"
    dc:identifier="http://www.danvk.org/wp/2011-11-05/java-ten-years-later/"
    dc:title="Java, Ten Years Later"
    trackback:ping="http://www.danvk.org/wp/2011-11-05/java-ten-years-later/trackback/" />
</rdf:RDF>			-->

			</div>
	
				
		<div class="post">

			<h1 class="storydate">03.27.11</h1> 
			<h2 id="post-749" class="storytitle"><a href="../../../../2011-03-27/crosscountry-crosswords/index.html" rel="bookmark" title="Permanent link to Crosscountry Crosswords">Crosscountry Crosswords</a></h2>
			<p class="meta">Posted in <a href="../../../personal/index.html" title="View all posts in personal" rel="category tag">personal</a>, <a href="../../index.html" title="View all posts in programming" rel="category tag">programming</a>, <a href="../../../web/index.html" title="View all posts in web" rel="category tag">web</a> at 2:07 pm by danvk</p>
		
							<p><img src="../../../../wp-content/uploads/2010/03/logo.png" alt="logo" title="logo" width="167" height="101" align="right" class="alignright size-full wp-image-688" />It&#8217;s been almost a year since I introduced <a href="../../../../2010-03-22/introducing-lmnowave/index.html">lmnowave</a>, the collaborative crossword puzzle gadget for <a href="http://wave.google.com/">Google Wave</a>. A lot has happened in that past year, not least the cancelation of Wave.</p>
<p>First, to clear up some confusion. It&#8217;s not &#8220;I&#8217;m no wave&#8221;, it&#8217;s &#8220;L-M-N-O-Wave&#8221;, which is a play on &#8220;L-M-N-O-Puz&#8221;, aka <a href="http://neugierig.org/software/lmnopuz/">lmnopuz</a>, the software on which my collaborative crossword system is based. Only a few dozen people ever saw lmnopuz, so no one got the joke. And I realized after releasing it that, by changing &#8216;puz&#8217; -&gt; &#8216;wave&#8217;, I&#8217;d taken away any hint of what my wave gadget actually did. A bad name. Oh well.</p>
<p>In August, Google announced that <a href="http://googleblog.blogspot.com/2010/08/update-on-google-wave.html">Wave was canceled</a>. This seemed to be the end of lmnowave. Sure, Wave was still usable. But the life had been sucked out of the project. This was quite disappointing to me, since I&#8217;d spent a fair bit of my own time developing the crossword gadget.</p>
<p>Then, in mid-December, Douwe Osinga <a href="http://googlewave.blogspot.com/2010/12/announcing-google-shared-spaces.html">introduced</a> the oddly-named <a href="http://sharedspaces.googlelabs.com/">Google Shared Spaces</a>. It&#8217;s an attempt to salvage the Wave gadget code, to let it live outside of Wave.</p>
<p>For lmnopuz, it&#8217;s perfect. Here&#8217;s the <a href="http://sharedspaces.googlelabs.com/gallery/app?app_id=96001">lmnowave shared space</a>. You can use it to collaborate on crosswords with your friends, just like you could with lmnowave. In some ways, it&#8217;s even better, since the Wave UI is stripped away and you can focus on your puzzle. To do crosscountry crosswords, my <a href="http://ericaricardo.com/">friend</a> and I open up a shared space and call each other on Skype. The combination works really well.</p>
<p>What does the future hold for lmnowave? It&#8217;s a bit unclear. I may turn it into a Facebook game, or perhaps use it to learn how to write applications for the <a href="http://www.apple.com/mac/app-store/">Mac App store</a>.</p>
<p>Enjoy!</p>
			
			<p class="feedback">
			<a href="../../../../2011-03-27/crosscountry-crosswords/index.html" rel="bookmark" title="Permanent link to Crosscountry Crosswords" class="permalink">Permalink</a>
			<span class="commentslink">Comments off</span>						</p>
			
			<!--
			<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
			xmlns:dc="http://purl.org/dc/elements/1.1/"
			xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
		<rdf:Description rdf:about="http://www.danvk.org/wp/2011-03-27/crosscountry-crosswords/"
    dc:identifier="http://www.danvk.org/wp/2011-03-27/crosscountry-crosswords/"
    dc:title="Crosscountry Crosswords"
    trackback:ping="http://www.danvk.org/wp/2011-03-27/crosscountry-crosswords/trackback/" />
</rdf:RDF>			-->

			</div>
	
				
		<div class="post">

			<h1 class="storydate">03.09.11</h1> 
			<h2 id="post-720" class="storytitle"><a href="../../../../2011-03-09/commacopy/index.html" rel="bookmark" title="Permanent link to Commacopy">Commacopy</a></h2>
			<p class="meta">Posted in <a href="../../index.html" title="View all posts in programming" rel="category tag">programming</a>, <a href="../../../web/index.html" title="View all posts in web" rel="category tag">web</a> at 8:16 am by danvk</p>
		
							<p>At work, I often see web pages that display large numbers like so:</p>
<table>
<tr>
<td>num-bytes</td>
<td>1,234,567,890</td>
</tr>
<tr>
<td>num-entries</td>
<td>123,456,789</td>
</tr>
</table>
<p>Including the commas in the display makes the numbers easier to read. But it does have a downside. Say you want to calculate the average number of bytes per entry. If you copy/paste the numbers above, the commas will prevent most programming languages (e.g. <a href="http://en.wikipedia.org/wiki/Python_(programming_language)">python</a> or <a href="http://en.wikipedia.org/wiki/Bc_programming_language">bc</a>) from interpreting them correctly.</p>
<p>My coworker <a href="http://dsandler.org/wp/">Dan</a> came up with a great solution to this conundrum using CSS. Try copy/pasting these numbers over into the text box:</p>
<style type="text/css">.pre-comma:before { content:","; }</style>
<table>
<tr valign="top">
<td valign="top" width="50%">
<ul>
<li>1<span class='pre-comma'>234</span> <b> or </b> 2<span class='pre-comma'>345</span>
<li>-12<span class='pre-comma'>345</span>.67
<li>-123<span class='pre-comma'>456</span><span class='pre-comma'>789</span></ul>
</td>
<td valign="top"><textarea rows=4 cols=30></textarea></td>
</tr>
</table>
<p>The commas don&#8217;t copy! Best of both worlds!</p>
<p>You can view source to see how it works, but let&#8217;s jump straight to the goodies:</p>
<p><!-- hoisted from https://www.squarefree.com/bookmarklets/ --></p>
<style type="text/css">a.bml { border:1px outset #ddd; padding: 1px; vertical-align: 1px; background: #ddd; text-decoration: none;  font-family: sans-serif; color: darkgreen; }</style>
<p><b>Bookmarklet: </b><a class="bml" href="javascript:var%20s%20=%20document.getElementsByTagName(%27*%27);var%20re%20=%20/[-+]?(\d{1,3})(,\d\d\d)+(\.\d*)?/;var%20changed%20=%20false;for%20(var%20i%20=%200;%20i%20<%20s.length;%20i++)%20{var%20el%20=%20s[i];for%20(var%20j%20=%200;%20j%20<%20el.childNodes.length;%20j++)%20{if%20(el.childNodes[j].nodeType%20==%203)%20{var%20txtEl%20=%20el.childNodes[j];var%20txt%20=%20txtEl.nodeValue;if%20(txt.match(re))%20{changed%20=%20true;var%20new_span%20=%20document.createElement(%22span%22);new_span.innerHTML%20=%20txt.replace(/,(\d\d\d)/g,%22<span%20class=%27pre-comma%27>$1</span>%22);el.replaceChild(new_span,%20txtEl);}}}}if%20(changed)%20{var%20rule%20=%20%22content:%20%27,%27;%22;var%20styleSheetElement%20=%20document.createElement(%22style%22);styleSheetElement.type%20=%20%22text/css%22;document.getElementsByTagName(%22head%22)[0].appendChild(styleSheetElement);for%20(var%20i%20=%200;%20i%20<%20document.styleSheets.length;%20i++)%20{if%20(document.styleSheets[i].disabled)%20continue;var%20mysheet%20=%20document.styleSheets[i];try%20{if%20(mysheet.insertRule)%20{var%20idx%20=%20mysheet.cssRules%20?%20mysheet.cssRules.length%20:%200;mysheet.insertRule(%22.pre-comma:before%20{%20%22%20+%20rule%20+%20%22%20}%22,%20idx);}%20else%20if%20(mysheet.addRule)%20{mysheet.addRule(%22.pre-comma:before%22,%20rule);}return;}%20catch(err)%20{}}}">commacopy</a></span></p>
<p><b>Unobtrusive JavaScript: </b><a href="http://www.danvk.org/commacopy/commacopy.js">commacopy.js</a></p>
<p>To use the bookmarklet, drag it to your browser&#8217;s bookmarks toolbar. If you click it, it will silently convert all numbers containing commas on the current page to the fancy copy/pasteable commas. This should really be a Chrome extension that runs on every page, but I&#8217;ll leave that as an exercise for the reader.</p>
<p>To use the unobtrusive JS, make a copy of <a href="http://www.danvk.org/commacopy/commacopy.js">commacopy.js</a> and include it in your page via:<br />
<code><br />
&lt;script src="commacopy.js" language="text/javascript"&gt;&lt;script&gt;<br />
</code></p>
<p>commacopy works by converting a number like:<br />
<code><br />
123,456,789<br />
</code></p>
<p>into this HTML:<br />
<code><br />
&lt;style type="text/css"&gt;<br />
.pre-comma:before {<br />
&nbsp;&nbsp;content: ",";<br />
}<br />
&lt;/style&gt;<br />
123&lt;span class='pre-comma'&gt;456&lt;/span&gt;&lt;span class='pre-comma'&gt;789&lt;/span&gt;<br />
</code></p>
<p>The commas are only present in a CSS style, rather than in the text itself. For reasons which aren&#8217;t entirely clear to me, this means that they don&#8217;t make it into the clipboard when you copy/paste them.</p>
			
			<p class="feedback">
			<a href="../../../../2011-03-09/commacopy/index.html" rel="bookmark" title="Permanent link to Commacopy" class="permalink">Permalink</a>
			<a href="../../../../2011-03-09/commacopy/index.html#comments" class="commentslink"  title="Comment on Commacopy">2 Comments</a>						</p>
			
			<!--
			<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
			xmlns:dc="http://purl.org/dc/elements/1.1/"
			xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
		<rdf:Description rdf:about="http://www.danvk.org/wp/2011-03-09/commacopy/"
    dc:identifier="http://www.danvk.org/wp/2011-03-09/commacopy/"
    dc:title="Commacopy"
    trackback:ping="http://www.danvk.org/wp/2011-03-09/commacopy/trackback/" />
</rdf:RDF>			-->

			</div>
	
		
		<p>
			<span class="post_nav"><a href="../../index.html" >&laquo; Previous Page</a> &#8212; <a href="../3/index.html" >&laquo; Previous entries</a></span>
		<!--	<a href="http://www.danvk.org/wp/category/programming/" >&laquo; Previous Page</a> &#183; <a href="http://www.danvk.org/wp/category/programming/page/3/" >Next Page &raquo;</a>-->
			<span><a href="../../index.html" >Next entries &raquo;</a> &#8212; <a href="../3/index.html" >Next Page &raquo;</a></span>
		</p>
		
	
</div>

<div id="sidebar">
<ul>

	<li id="search">
		<form method="get" id="searchform" action="http://www.danvk.org/wp/index.php">
<p>
<input type="text" value="" name="s" id="s" /><br />
<input type="submit" id="searchsubmit" value="Search" />
</p>
</form>	</li> 

<!-- I want more control than this gives me: wp_list_pages('title_li=<h2>' . __('Pages') . '</h2>' ); -->

	<li class="pagenav">
		<ul>
			<!--<li class="page_item"><a href="http://www.danvk.org/wp/?page_id=2" title="About">About</a></li>-->
			<li>Dan across the web
				<ul>
					<li class="social">
					<a href="https://github.com/danvk"><img src="https://github.com/favicon.ico" width=16 height=16 border=0></a>
					<a href="https://twitter.com/danvdk"><img src="https://twitter.com/favicon.ico" width=16 height=16 border=0></a>
					<a href="https://www.facebook.com/danvdk"><img src="https://facebook.com/favicon.ico" width=16 height=16 border=0></a>
					<a href="https://plus.google.com/+DanVanderkam"><img src="https://plus.google.com/favicon.ico" width=16 height=16 border=0></a>
					<a href="https://www.linkedin.com/profile/view?id=340204755"><img src="https://www.linkedin.com/favicon.ico" width=16 height=16 border=0></a>
					<script data-gittip-username="danvdk" data-gittip-widget="button" src="http://gttp.co/v1.js"></script>
				</ul>

			<li>Dan's projects
				<ul class="projects">
					<li><a href="http://dygraphs.com/">dygraphs</a>
					<li><a href="http://oldsf.org/">OldSF</a>
					<li><a href="http://comparea.org/">Comparea</a>
					<li><a href="https://github.com/danvk/webdiff">git webdiff</a>
				</ul>

			<li>Features on this site
				<ul class="features">
					<li><a href="https://www.danvk.org/boggle/" title="Boggle Solver">Online Boggle Solver</a></li>
					<li><a href="../../../../beals-conjecture/index.html" title="Beal&#039;s Conjecture">Beal's Conjecture</a></li>
					<li><a href="../../../../gw-basic-program-decoder/index.html" title="GW-BASIC Program Decoder">GW-BASIC Program Decoder</a></li>
					<li><a href="http://www.danvk.org/tower/nstower.html">NS-Tower in your Browser</a></li>
				</ul>
		</ul>
	</li>

	<!--
	<li id="twitter_sidebar">
		<div id="twitter_div">
		<a href="http://twitter.com/danvdk" target="_blank"><h2 class="sidebar-title">Follow me on Twitter</h2></a>
		<ul id="twitter_update_list" style="padding-right:30px"></ul>
		
		</div>
		<script type="text/javascript" src="http://twitter.com/javascripts/blogger.js"></script>
		<script type="text/javascript" src="http://twitter.com/statuses/user_timeline/danvdk.json?callback=twitterCallback2&amp;count=5"></script>
	</li>
	-->

	<li id="archives">
		<h2>Archives</h2>
		<ul>
			<li><a href='../../../../2014/10/index.html'>October 2014</a></li>
	<li><a href='../../../../2014/08/index.html'>August 2014</a></li>
	<li><a href='../../../../2014/07/index.html'>July 2014</a></li>
	<li><a href='../../../../2014/06/index.html'>June 2014</a></li>
	<li><a href='../../../../2014/03/index.html'>March 2014</a></li>
	<li><a href='../../../../2014/02/index.html'>February 2014</a></li>
	<li><a href='../../../../2014/01/index.html'>January 2014</a></li>
	<li><a href='../../../../2013/08/index.html'>August 2013</a></li>
	<li><a href='../../../../2013/06/index.html'>June 2013</a></li>
	<li><a href='../../../../2013/04/index.html'>April 2013</a></li>
	<li><a href='../../../../2013/03/index.html'>March 2013</a></li>
	<li><a href='../../../../2013/02/index.html'>February 2013</a></li>
	<li><a href='../../../../2013/01/index.html'>January 2013</a></li>
	<li><a href='../../../../2012/12/index.html'>December 2012</a></li>
	<li><a href='../../../../2012/09/index.html'>September 2012</a></li>
	<li><a href='../../../../2012/08/index.html'>August 2012</a></li>
	<li><a href='../../../../2012/07/index.html'>July 2012</a></li>
	<li><a href='../../../../2012/06/index.html'>June 2012</a></li>
	<li><a href='../../../../2012/05/index.html'>May 2012</a></li>
	<li><a href='../../../../2012/04/index.html'>April 2012</a></li>
	<li><a href='../../../../2012/02/index.html'>February 2012</a></li>
	<li><a href='../../../../2012/01/index.html'>January 2012</a></li>
	<li><a href='../../../../2011/12/index.html'>December 2011</a></li>
	<li><a href='../../../../2011/11/index.html'>November 2011</a></li>
	<li><a href='../../../../2011/08/index.html'>August 2011</a></li>
	<li><a href='../../../../2011/03/index.html'>March 2011</a></li>
	<li><a href='../../../../2010/06/index.html'>June 2010</a></li>
	<li><a href='../../../../2010/03/index.html'>March 2010</a></li>
	<li><a href='../../../../2009/12/index.html'>December 2009</a></li>
	<li><a href='../../../../2009/11/index.html'>November 2009</a></li>
	<li><a href='../../../../2009/10/index.html'>October 2009</a></li>
	<li><a href='../../../../2009/09/index.html'>September 2009</a></li>
	<li><a href='../../../../2009/08/index.html'>August 2009</a></li>
	<li><a href='../../../../2009/06/index.html'>June 2009</a></li>
	<li><a href='../../../../2009/05/index.html'>May 2009</a></li>
	<li><a href='../../../../2009/03/index.html'>March 2009</a></li>
	<li><a href='../../../../2009/02/index.html'>February 2009</a></li>
	<li><a href='../../../../2009/01/index.html'>January 2009</a></li>
	<li><a href='../../../../2008/12/index.html'>December 2008</a></li>
	<li><a href='../../../../2008/11/index.html'>November 2008</a></li>
	<li><a href='../../../../2008/10/index.html'>October 2008</a></li>
	<li><a href='../../../../2008/09/index.html'>September 2008</a></li>
	<li><a href='../../../../2008/08/index.html'>August 2008</a></li>
	<li><a href='../../../../2008/06/index.html'>June 2008</a></li>
	<li><a href='../../../../2008/05/index.html'>May 2008</a></li>
	<li><a href='../../../../2008/02/index.html'>February 2008</a></li>
	<li><a href='../../../../2008/01/index.html'>January 2008</a></li>
	<li><a href='../../../../2007/12/index.html'>December 2007</a></li>
	<li><a href='../../../../2007/11/index.html'>November 2007</a></li>
	<li><a href='../../../../2007/10/index.html'>October 2007</a></li>
	<li><a href='../../../../2007/09/index.html'>September 2007</a></li>
	<li><a href='../../../../2007/08/index.html'>August 2007</a></li>
	<li><a href='../../../../2007/07/index.html'>July 2007</a></li>
	<li><a href='../../../../2007/06/index.html'>June 2007</a></li>
	<li><a href='../../../../2007/05/index.html'>May 2007</a></li>
	<li><a href='../../../../2007/04/index.html'>April 2007</a></li>
	<li><a href='../../../../2007/03/index.html'>March 2007</a></li>
	<li><a href='../../../../2007/02/index.html'>February 2007</a></li>
	<li><a href='../../../../2007/01/index.html'>January 2007</a></li>
	<li><a href='../../../../2006/12/index.html'>December 2006</a></li>
	<li><a href='../../../../2006/11/index.html'>November 2006</a></li>
	<li><a href='../../../../2006/10/index.html'>October 2006</a></li>
	<li><a href='../../../../2006/09/index.html'>September 2006</a></li>
		</ul>
	</li>

		
	<li id="categories">
		<h2>Categories</h2>
		<ul>
			<li class="cat-item cat-item-21"><a href="../../../astronomy/index.html" title="View all posts filed under astronomy">astronomy</a>
</li>
	<li class="cat-item cat-item-10"><a href="../../../boggle/index.html" title="View all posts filed under boggle">boggle</a>
</li>
	<li class="cat-item cat-item-8"><a href="../../../books/index.html" title="View all posts filed under books">books</a>
</li>
	<li class="cat-item cat-item-23"><a href="../../../finance/index.html" title="View all posts filed under finance">finance</a>
</li>
	<li class="cat-item cat-item-27"><a href="../../../javascript/index.html" title="View all posts filed under javascript">javascript</a>
</li>
	<li class="cat-item cat-item-20"><a href="../../../math/index.html" title="View all posts filed under math">math</a>
</li>
	<li class="cat-item cat-item-13"><a href="../../../meta/index.html" title="View all posts filed under meta">meta</a>
</li>
	<li class="cat-item cat-item-19"><a href="../../../movies/index.html" title="View all posts filed under movies">movies</a>
</li>
	<li class="cat-item cat-item-11"><a href="../../../music/index.html" title="View all posts filed under music">music</a>
</li>
	<li class="cat-item cat-item-16"><a href="../../../news/index.html" title="View all posts filed under news">news</a>
</li>
	<li class="cat-item cat-item-5"><a href="../../../personal/index.html" title="View all posts filed under personal">personal</a>
</li>
	<li class="cat-item cat-item-6"><a href="../../../politics/index.html" title="View all posts filed under politics">politics</a>
</li>
	<li class="cat-item cat-item-2 current-cat"><a href="../../index.html" title="View all posts filed under programming">programming</a>
</li>
	<li class="cat-item cat-item-9"><a href="../../../reviews/index.html" title="View all posts filed under reviews">reviews</a>
</li>
	<li class="cat-item cat-item-22"><a href="../../../san-francisco/index.html" title="View all posts filed under san francisco">san francisco</a>
</li>
	<li class="cat-item cat-item-7"><a href="../../../science/index.html" title="View all posts filed under science">science</a>
</li>
	<li class="cat-item cat-item-28"><a href="../../../space/index.html" title="View all posts filed under space">space</a>
</li>
	<li class="cat-item cat-item-17"><a href="../../../sports/index.html" title="View all posts filed under sports">sports</a>
</li>
	<li class="cat-item cat-item-3"><a href="../../../tennis/index.html" title="View all posts filed under tennis">tennis</a>
</li>
	<li class="cat-item cat-item-4"><a href="../../../travel/index.html" title="View all posts filed under travel">travel</a>
</li>
	<li class="cat-item cat-item-18"><a href="../../../tv/index.html" title="View all posts filed under tv">tv</a>
</li>
	<li class="cat-item cat-item-1"><a href="../../../uncategorized/index.html" title="View all posts filed under Uncategorized">Uncategorized</a>
</li>
	<li class="cat-item cat-item-15"><a href="../../../web/index.html" title="View all posts filed under web">web</a>
</li>
	<li class="cat-item cat-item-14"><a href="../../../wikipedia/index.html" title="View all posts filed under wikipedia">wikipedia</a>
</li>
 
		</ul>
	</li>
	
			
	
	<li id="meta">
		<h2>Meta</h2>
		<ul>
				<li><a href="../../../../wp-login.html">Log in</a></li>
		<li><a href="../../../../feed/index.html" title="Syndicate this site using RSS">Entries <abbr title="Really Simple Syndication">RSS</abbr></a></li>
		<li><a href="../../../../comments/feed/index.html" title="The latest comments to all posts in RSS">Comments <abbr title="Really Simple Syndication">RSS</abbr></a></li>
		<li><a href="http://wordpress.org/" title="Powered by Wordpress, state-of-the-art semantic personal publishing platform.">Wordpress</a></li>
				</ul>
	</li>
	
</ul>
</div>

<div id="footer">

<!--<p>


Design by <a href="http://ravenkeller.com">Raven Keller</a> and <a href="http://weblogs.us" title="Theme sponsored by Weblogs.us">Weblogs.us</a>
&#183;
<a href="http://validator.w3.org/check/referer" title="This page validates as XHTML 1.0 Transitional"><abbr title="eXtensible HyperText Markup Language">XHTML</abbr></a>
&#183;
<a href="http://jigsaw.w3.org/css-validator/check/referer" title="This page validates as CSS"><abbr title="Cascading Style Sheets">CSS</abbr></a>
<img src='http://counter.dreamhost.com/cgi-bin/Count.cgi?df=danvk-maincounter.dat&pad=F&ft=0&dd=copper&istrip=T' align=right />
</p>-->


</div>


<!-- Google Analytics -->
<script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-769809-1";
urchinTracker();
</script>

</body>

<!-- Mirrored from www.danvk.org/wp/category/programming/page/2/ by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 15 Oct 2014 03:17:50 GMT -->
</html>	



<!--<footer class="container"></footer>-->
