 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">


<!-- Mirrored from www.danvk.org/wp/category/programming/page/7/ by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 15 Oct 2014 03:35:38 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head profile="http://gmpg.org/xfn/11">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<meta name="generator" content="WordPress 3.9.2" /> <!-- leave this for stats please -->
	<title>danvk.org &raquo; programming</title>
	<style type="text/css" media="screen">
		@import url( ../../../../wp-content/themes/ocadia/style.css);
			</style>
	<link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="../../../../feed/index.html" />
	<link rel="alternate" type="text/xml" title="RSS .92" href="../../../../feed/rss/index.html" />
	<link rel="alternate" type="application/atom+xml" title="Atom 0.3" href="../../../../feed/atom/index.html" />
	<link rel="pingback" href="../../../../xmlrpc.php" />
    	<link rel='archives' title='October 2014' href='../../../../2014/10/index.html' />
	<link rel='archives' title='August 2014' href='../../../../2014/08/index.html' />
	<link rel='archives' title='July 2014' href='../../../../2014/07/index.html' />
	<link rel='archives' title='June 2014' href='../../../../2014/06/index.html' />
	<link rel='archives' title='March 2014' href='../../../../2014/03/index.html' />
	<link rel='archives' title='February 2014' href='../../../../2014/02/index.html' />
	<link rel='archives' title='January 2014' href='../../../../2014/01/index.html' />
	<link rel='archives' title='August 2013' href='../../../../2013/08/index.html' />
	<link rel='archives' title='June 2013' href='../../../../2013/06/index.html' />
	<link rel='archives' title='April 2013' href='../../../../2013/04/index.html' />
	<link rel='archives' title='March 2013' href='../../../../2013/03/index.html' />
	<link rel='archives' title='February 2013' href='../../../../2013/02/index.html' />
	<link rel='archives' title='January 2013' href='../../../../2013/01/index.html' />
	<link rel='archives' title='December 2012' href='../../../../2012/12/index.html' />
	<link rel='archives' title='September 2012' href='../../../../2012/09/index.html' />
	<link rel='archives' title='August 2012' href='../../../../2012/08/index.html' />
	<link rel='archives' title='July 2012' href='../../../../2012/07/index.html' />
	<link rel='archives' title='June 2012' href='../../../../2012/06/index.html' />
	<link rel='archives' title='May 2012' href='../../../../2012/05/index.html' />
	<link rel='archives' title='April 2012' href='../../../../2012/04/index.html' />
	<link rel='archives' title='February 2012' href='../../../../2012/02/index.html' />
	<link rel='archives' title='January 2012' href='../../../../2012/01/index.html' />
	<link rel='archives' title='December 2011' href='../../../../2011/12/index.html' />
	<link rel='archives' title='November 2011' href='../../../../2011/11/index.html' />
	<link rel='archives' title='August 2011' href='../../../../2011/08/index.html' />
	<link rel='archives' title='March 2011' href='../../../../2011/03/index.html' />
	<link rel='archives' title='June 2010' href='../../../../2010/06/index.html' />
	<link rel='archives' title='March 2010' href='../../../../2010/03/index.html' />
	<link rel='archives' title='December 2009' href='../../../../2009/12/index.html' />
	<link rel='archives' title='November 2009' href='../../../../2009/11/index.html' />
	<link rel='archives' title='October 2009' href='../../../../2009/10/index.html' />
	<link rel='archives' title='September 2009' href='../../../../2009/09/index.html' />
	<link rel='archives' title='August 2009' href='../../../../2009/08/index.html' />
	<link rel='archives' title='June 2009' href='../../../../2009/06/index.html' />
	<link rel='archives' title='May 2009' href='../../../../2009/05/index.html' />
	<link rel='archives' title='March 2009' href='../../../../2009/03/index.html' />
	<link rel='archives' title='February 2009' href='../../../../2009/02/index.html' />
	<link rel='archives' title='January 2009' href='../../../../2009/01/index.html' />
	<link rel='archives' title='December 2008' href='../../../../2008/12/index.html' />
	<link rel='archives' title='November 2008' href='../../../../2008/11/index.html' />
	<link rel='archives' title='October 2008' href='../../../../2008/10/index.html' />
	<link rel='archives' title='September 2008' href='../../../../2008/09/index.html' />
	<link rel='archives' title='August 2008' href='../../../../2008/08/index.html' />
	<link rel='archives' title='June 2008' href='../../../../2008/06/index.html' />
	<link rel='archives' title='May 2008' href='../../../../2008/05/index.html' />
	<link rel='archives' title='February 2008' href='../../../../2008/02/index.html' />
	<link rel='archives' title='January 2008' href='../../../../2008/01/index.html' />
	<link rel='archives' title='December 2007' href='../../../../2007/12/index.html' />
	<link rel='archives' title='November 2007' href='../../../../2007/11/index.html' />
	<link rel='archives' title='October 2007' href='../../../../2007/10/index.html' />
	<link rel='archives' title='September 2007' href='../../../../2007/09/index.html' />
	<link rel='archives' title='August 2007' href='../../../../2007/08/index.html' />
	<link rel='archives' title='July 2007' href='../../../../2007/07/index.html' />
	<link rel='archives' title='June 2007' href='../../../../2007/06/index.html' />
	<link rel='archives' title='May 2007' href='../../../../2007/05/index.html' />
	<link rel='archives' title='April 2007' href='../../../../2007/04/index.html' />
	<link rel='archives' title='March 2007' href='../../../../2007/03/index.html' />
	<link rel='archives' title='February 2007' href='../../../../2007/02/index.html' />
	<link rel='archives' title='January 2007' href='../../../../2007/01/index.html' />
	<link rel='archives' title='December 2006' href='../../../../2006/12/index.html' />
	<link rel='archives' title='November 2006' href='../../../../2006/11/index.html' />
	<link rel='archives' title='October 2006' href='../../../../2006/10/index.html' />
	<link rel='archives' title='September 2006' href='../../../../2006/09/index.html' />
	<link rel="alternate" type="application/rss+xml" title="danvk.org &raquo; programming Category Feed" href="../../feed/index.html" />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="../../../../xmlrpc0db0.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="../../../../wp-includes/wlwmanifest.xml" /> 
<meta name="generator" content="WordPress 3.9.2" />
<style type="text/css">
/* <![CDATA[ */
img.latex { vertical-align: middle; border: none; }
/* ]]> */
</style>
<style type="text/css" id="syntaxhighlighteranchor"></style>
</head>
	
<body>

<div id="wrapper">

<div id="header">
<h1><a href="http://www.danvk.org/wp">danvk.org</a></h1>
<p>Keepin&#8217; static like wool fabric since 2006</p>
</div>

<div id="content">

			
				
		<div class="post">

			<h1 class="storydate">01.31.07</h1> 
			<h2 id="post-76" class="storytitle"><a href="../../../../2007-01-31/reading-a-dictionary-into-a-hash-in-ruby/index.html" rel="bookmark" title="Permanent link to Reading a dictionary into a hash in Ruby">Reading a dictionary into a hash in Ruby</a></h2>
			<p class="meta">Posted in <a href="../../index.html" title="View all posts in programming" rel="category tag">programming</a> at 12:15 am by danvk</p>
		
							<p>My <a href="../../../../index7665.html?p=65">experiment with code golf</a> the other day forced me to think about ways to load a dictionary into a hash using only one line of code. I couldn&#8217;t think of a way then, but today I came up with this:</p>
<p><code>h = Hash[*(IO.readlines(Dict).map{|w|[w.chomp,1]}.flatten)]</code></p>
<p>Slow as hell, but it works! With  <a href="http://www.fivesevensix.com/articles/2005/05/20/array-to_h">little</a> <a href="http://www.bigbold.com/snippets/posts/show/302">searching</a>, I found another method, which is much better:</p>
<p><code>h = IO.readlines(Dict).inject({}) {|h,w| h[w.chop!]=1; h }</code></p>
<p>The &#8220;;&#8221; in there pushes the meaning of &#8220;one line&#8221;, but change &#8220;1; h&#8221; to &#8220;1 and h&#8221; and it&#8217;s less ambiguous. That got me thinking about all the different ways to load a dictionary into a hash. Which one is the fastest? Here&#8217;s all the ones I could think of, sorted from fastest to slowest. They were tested with <code>Dict="/usr/share/dict/words"</code>:</p>
<table width=100%>
<tr>
<th>Time</th>
<th>Command</th>
</tr>
<tr>
<td>0.443s</td>
<td><code>h = {}; open(Dict).read.split.each { |w| h[w]=1 }</code></td>
</tr>
<tr>
<td>0.448s</td>
<td><code>h = {}; IO.read(Dict).split.each { |w| h[w]=1 }</code></td>
</tr>
<tr>
<td>0.555s</td>
<td><code>h = {}; IO.readlines(Dict).map { |w| h[w.chop!] = 1 }</code></td>
</tr>
<tr>
<td>0.568s</td>
<td><code>h = {}; IO.readlines(Dict).map { |w| h[w.chomp!] = 1 }</code></td>
</tr>
<tr>
<td>0.882s</td>
<td><code>h = {}; IO.readlines(Dict).map { |w| h[w.chop] = 1 }</code></td>
</tr>
<tr>
<td>0.897s</td>
<td><code>h = {}; IO.readlines(Dict).map { |w| h[w.chomp] = 1 }</code></td>
</tr>
<tr>
<td>0.958s</td>
<td><code>h = {}; IO.foreach(Dict) { |w| h[w.chop!] = 1 }</code></td>
</tr>
<tr>
<td>1.064s</td>
<td><code>h = open(Dict).read.split.inject({}) {|h,w| h[w.chop!]=1; h }</code></td>
</tr>
<tr>
<td>1.065s</td>
<td><code>h = IO.read(Dict).split.inject({}) {|h,w| h[w.chop!]=1; h }</code></td>
</tr>
<tr>
<td>1.306s</td>
<td><code>h = {}; IO.foreach(Dict) { |w| h[w.chomp] = 1 }</code></td>
</tr>
<tr>
<td>1.475s</td>
<td><code>h = {}; open(Dict).read.scan(/\w+/) { |w| h[w]=1 }</code></td>
</tr>
<tr>
<td>1.479s</td>
<td><code>h = {}; IO.read(Dict).scan(/\w+/) { |w| h[w]=1 }</code></td>
</tr>
<tr>
<td>1.172s</td>
<td><code>h = IO.readlines(Dict).inject({}) {|h,w| h[w.chomp]=1; h }</code></td>
</tr>
<tr>
<td>26.022s</td>
<td><code>h = Hash[*(IO.readlines(Dict).map{|w|[w.chomp,1]}.flatten)]</code></td>
</tr>
</table>
<p>There are some clear trends here. First and foremost, it pays to eschew line-oriented processing. The <code>read</code> method slurps in the whole string and then split segments it into words. I suspect that <code>split</code> with no parameter (=split on whitespace) is so common that it&#8217;s special-cased in the Ruby interpreter. A <a href="http://www.ruby-doc.org/doxygen/1.8.4/string_8c-source.html#l03467">little digging</a> into the Ruby C source confirms that guess. The relevant stuff is the <code>awk_split</code> stuff starting at line 3514. Just for the record, the Ruby C source is some of the cleanest I&#8217;ve ever seen.</p>
<p>Another clear trend: using the self-modifying <code>chomp!</code> and <code>chop!</code> is much faster than <code>chomp</code> and <code>chop</code>. This makes a lot of sense, since Ruby doesn&#8217;t need to create bunches of new strings.</p>
<p>So in conclusion, the fastest technique is:</p>
<p><code>h = {}; open(Dict).read.split.each { |w| h[w]=1 }</code></p>
<p>and the fastest one-liner is:</p>
<p><code>h = open(Dict).read.split.inject({}) {|h,w| h[w.chop!]=1; h }</code></p>
<p>I suspect that a solution using <code>scan</code> could win if Ruby had a special case for whitespace in that routine like it does in <code>split</code>.</p>
			
			<p class="feedback">
			<a href="../../../../2007-01-31/reading-a-dictionary-into-a-hash-in-ruby/index.html" rel="bookmark" title="Permanent link to Reading a dictionary into a hash in Ruby" class="permalink">Permalink</a>
			<span class="commentslink">Comments off</span>						</p>
			
			<!--
			<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
			xmlns:dc="http://purl.org/dc/elements/1.1/"
			xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
		<rdf:Description rdf:about="http://www.danvk.org/wp/2007-01-31/reading-a-dictionary-into-a-hash-in-ruby/"
    dc:identifier="http://www.danvk.org/wp/2007-01-31/reading-a-dictionary-into-a-hash-in-ruby/"
    dc:title="Reading a dictionary into a hash in Ruby"
    trackback:ping="http://www.danvk.org/wp/2007-01-31/reading-a-dictionary-into-a-hash-in-ruby/trackback/" />
</rdf:RDF>			-->

			</div>
	
				
		<div class="post">

			<h1 class="storydate">01.30.07</h1> 
			<h2 id="post-66" class="storytitle"><a href="../../../../2007-01-30/boggle-3-succeed-by-not-being-stupid/index.html" rel="bookmark" title="Permanent link to Boggle #3: Succeed by not Being Stupid">Boggle #3: Succeed by not Being Stupid</a></h2>
			<p class="meta">Posted in <a href="../../../boggle/index.html" title="View all posts in boggle" rel="category tag">boggle</a>, <a href="../../index.html" title="View all posts in programming" rel="category tag">programming</a> at 11:02 pm by danvk</p>
		
							<p><a href="../../../../index7665.html?p=65">Last time</a>, we wrote a program that found all the words on a Boggle board in just over four minutes per board. But what was it spending all that time doing? Let&#8217;s add some debugging output to find out:</p>
<p>def solve(x, y, sofar)<br />
  puts &quot;#{x},#{y}: &#8216;#{sofar}&#8217;&quot;<br />
  &#8230;</p>
<p>Here&#8217;s what happens:</p>
<pre>$ ruby fast.rb a b c d e f g h i j k l m n o p       
0,0: ''
0,1: 'a'
0,2: 'ab'
0,3: 'abc'
1,2: 'abcd'
1,1: 'abcdg'
1,0: 'abcdgf'
2,0: 'abcdgfe'
2,1: 'abcdgfei'
2,2: 'abcdgfeij'
1,3: 'abcdgfeijk'
2,3: 'abcdgfeijkh'
3,2: 'abcdgfeijkhl'
3,1: 'abcdgfeijkhlo'
3,0: 'abcdgfeijkhlon'
3,3: 'abcdgfeijkhlo'
3,3: 'abcdgfeijkhl'
3,2: 'abcdgfeijkhlp'
3,1: 'abcdgfeijkhlpo'
3,0: 'abcdgfeijkhlpon'
...
</pre>
<p>Quick: how many words start with &#8220;abcd&#8221;? I can&#8217;t think of any either. But our program dutifully searches over the entire board for words we know it won&#8217;t find. It&#8217;s painful to think about all the time our search is wasting exploring paths that can&#8217;t possibly start real words. We need to cut off paths like &#8220;abcd&#8221; at the head. We can do this by creating a list of word stems: sequences of letters that can start legal Boggle words. &#8220;a&#8221; is on that list. So is &#8220;ab&#8221;. &#8220;abc&#8221; probably isn&#8217;t, though, and &#8220;abcd&#8221; certainly isn&#8217;t.</p>
<p>We may as well store the list of stems in another hash table. Here&#8217;s how:</p>
<pre class="brush: ruby; title: ; notranslate" title="">
Words = Hash.new
Stems = Hash.new
IO.foreach(&quot;words&quot;) do |line|
  line =~ /^([a-z]{3,17})\b/ or next
  wd = $1
  Words[wd] = true
  (1..wd.length-1).each do |len|
    Stems[wd[0,len]] = true
  end
end
</pre>
<p>Now we modify the solve routine to only make a recursive call when it could result in new words. This is a trivial change:</p>
<pre class="brush: ruby; title: ; notranslate" title="">
    solve(x+dx,y+dy,wd) if Stems[wd] # keep going if it'll help!
</pre>
<p>Now the moment of truth. How much of a win did these four new lines of code buy us?</p>
<pre>$ time ruby fast.rb a b c d e f g h i j k l m n o p 
18

real    0m7.831s
user    0m7.651s
sys     0m0.096s

$ time ruby fast.rb c a t d l i n e m a r o p e t s
2338

real    0m7.990s
user    0m7.818s
sys     0m0.094s
</pre>
<p><b>WOW!</b> That&#8217;s a factor of 30 improvement! If we dig a little deeper, it gets even more interesting:</p>
<pre>$ ruby -r profile fast.rb c a t d l i n e m a r o p e t s
2338
  %   cumulative   self              self     total
 time   seconds   seconds    calls  ms/call  ms/call  name
 40.19   213.80    213.80   172235     1.24     2.62  Range#each
 11.24   273.58     59.78        1 59780.00 401400.00  IO#foreach
 11.05   332.36     58.78  1554484     0.04     0.04  Hash#[]=
 10.96   390.64     58.28     8892     6.55    84.27  Array#each
 10.43   446.13     55.49  1381345     0.04     0.04  String#[]
  4.25   468.76     22.63   130010     0.17     0.30  Range#===
  2.99   484.64     15.88   247385     0.06     0.06  Fixnum#<=>
  2.41   497.44     12.80   244423     0.05     0.05  Fixnum#+
  1.40   504.87      7.43   132259     0.06     0.06  Array#[]
  1.37   512.18      7.31     8891     0.82    85.58  Object#solve
</pre>
<p>The first three methods are called only in dictionary-loading code we just wrote. The <i>vast</i> majority of time is being spent loading the dictionary! There&#8217;s not much we can do to improve this, but we can make it less important by changing the problem we&#8217;re trying to solve.</p>
<p>Right now we&#8217;re just trying to score one board. But if we knew in advance that we were going to score 10 boards, we could load the dictionary once and then score all ten boards using that dictionary. This would mitigate the slow dictionary load. Here&#8217;s one way to do it. Input is now taken from STDIN:</p>
<pre class="brush: ruby; title: ; notranslate" title="">
# Take whitespace-separated inputs on each line
ARGF.each do |line|
  Found.clear
  letters = line.chomp.split(' ')
  (0..15).each { |i| Bd[i/4][i%4] = letters[i] }
  (0..15).each { |i| solve(i/4, i%4, &quot;&quot;) }
  puts Found.keys.inject(0) { |sum,w| sum + Scores[w.length] }
end
</pre>
<p>There are a few Rubyisms we haven&#8217;t seen yet in those lines. <code>ARGF</code> is a great crutch for Perl programmers who miss typing <code>while(<>) {...}</code>. It opens each input file left in <code>ARGV</code> and yields each line. If there&#8217;s no input files left, it reads STDIN and yields each line it gets there. Many, many programs do their work in an ARGF loop.</p>
<p>The <code>chomp</code> method in <code>line.chomp</code> removes a trailing newline from <code>line</code>, if it&#8217;s there. The <code>split(' ')</code> is a special case of the split method that splits the line on whitespace into an array. These are also Perlisms. Come to think of it, most of the strange, idiosyncratic features of Ruby are ultimately inspired by Perl.</p>
<p>I generated a file with ten random boards in it:</p>
<pre>
c a t d l i n e m a r o p e t s
a b c d e f g h i j k l m n o p
s i e e u e o o c t r k x o n n 
c n s r e e h m i o r t o i k y 
t v b i t n p u e e o t n t r e 
y f h a s e g i o n m o d t a e 
e e n o l a o s t i a s v m e l 
s t n t e e n t a e e o c p o b 
a s y r p h u v i e r e e u p o 
s qu n g t f y a t b e w r e t e
</pre>
<p>And now the performance:</p>
<pre>$ time ruby multi.rb boards 
2338
18
138
121
190
212
272
211
138
87

real    0m8.454s
user    0m8.264s
sys     0m0.098s
</pre>
<p>It took 7.75 seconds to process one board earlier in this post, so that means that the solver itself is running at a rate of (8.264-7.75)/9 = 0.057 secs/board. This is fast enough that we need to start inverting our units. We&#8217;re getting 17.5 boards/sec, and we&#8217;ve improved by a factor of nearly 5000 since our initial attempt!</p>
			
			<p class="feedback">
			<a href="../../../../2007-01-30/boggle-3-succeed-by-not-being-stupid/index.html" rel="bookmark" title="Permanent link to Boggle #3: Succeed by not Being Stupid" class="permalink">Permalink</a>
			<a href="../../../../2007-01-30/boggle-3-succeed-by-not-being-stupid/index.html#comments" class="commentslink"  title="Comment on Boggle #3: Succeed by not Being Stupid">3 Comments</a>						</p>
			
			<!--
			<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
			xmlns:dc="http://purl.org/dc/elements/1.1/"
			xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
		<rdf:Description rdf:about="http://www.danvk.org/wp/2007-01-30/boggle-3-succeed-by-not-being-stupid/"
    dc:identifier="http://www.danvk.org/wp/2007-01-30/boggle-3-succeed-by-not-being-stupid/"
    dc:title="Boggle #3: Succeed by not Being Stupid"
    trackback:ping="http://www.danvk.org/wp/2007-01-30/boggle-3-succeed-by-not-being-stupid/trackback/" />
</rdf:RDF>			-->

			</div>
	
				
		<div class="post">

			 
			<h2 id="post-65" class="storytitle"><a href="../../../../2007-01-30/boggle-2-the-shortest-solver/index.html" rel="bookmark" title="Permanent link to Boggle #2: The Shortest Solver">Boggle #2: The Shortest Solver</a></h2>
			<p class="meta">Posted in <a href="../../../boggle/index.html" title="View all posts in boggle" rel="category tag">boggle</a>, <a href="../../index.html" title="View all posts in programming" rel="category tag">programming</a> at 1:40 am by danvk</p>
		
							<p><a href="../../../../index96f1.html?p=67">Last time</a>, we talked about how to play Boggle and the general idea of a program to find all the words on a board. This time, we&#8217;ll implement it! We&#8217;ll use <a href="http://www.ruby-lang.org/">Ruby</a>, since it&#8217;s such a wonderful language.</p>
<p>First of all, we&#8217;ll need a dictionary of valid English words. There are plenty of different dictionaries floating around the web, and if you&#8217;re running a UNIX-style OS, you&#8217;ve already got one in /usr/share/dict/words. That dictionary is pretty bad, though. It&#8217;s designed for spellcheckers, and has no shortage of extremely questionable words (e.g. &#8220;aal&#8221; &#8212; more on this in a future post). I&#8217;ve eventually settled on the <a href="http://personal.riverusers.com/~thegrendel/software.html">ENABLE2K</a> list, since it seems to agree well with the scrabble dictionary and my intuition for words.</p>
<p>A dictionary on disk is no good, though. We need to load it into memory. Hash tables are the best built-in data structure for us, since they provide fast word lookups. Here&#8217;s the code:</p>
<pre class="brush: ruby; title: ; notranslate" title="">
Words = Hash.new
IO.foreach(&quot;words&quot;) do |line|
  line =~ /^([a-z]{3,17})\b/ and Words[$1] = true
end
</pre>
<p>There&#8217;s some slightly subtle stuff going on here. <code>IO.foreach</code> passes each line in a file to its block. In a display of its Perl roots, Ruby includes the trailing newline on each line. That&#8217;s what the &#8220;\b&#8221; in the regular expression is matching. In Perl, we could have written <code>/^([a-z]{3,17})$/</code>, since Perl interprets &#8220;$&#8221; as end-of-line. But Ruby interprets it as end-of-string, so we have to fudge. The capturing parens cut off the newline and put the word in <code>$1</code>, which we add to the hash.</p>
<p>Just a little more setting up. We&#8217;ll represent the board as a 4&#215;4 array of strings, one for each letter on the board. Letters will come in from the command line arguments (<code>ARGV</code>). We also need a way to remember which words we&#8217;ve found and which cells we&#8217;ve gone through in the depth-first search.</p>
<pre class="brush: ruby; title: ; notranslate" title="">
Found = {} # = Hash.new
Prev = Array.new(4) { [false] * 4 }
Bd = Array.new(4) { [0] * 4 }
(0..15).each { |i| Bd[i/4][i%4] = ARGV[i] }
</pre>
<p>When you use multiplication on arrays in Ruby it acts like Perl&#8217;s <code>x</code> operator, so <code>[0] * 4 == [0,0,0,0]</code>.</p>
<p>Now for the meat of the algorithm, the recursive DFS routine. When we enter a cell, we mark it as visited so that longer paths won&#8217;t illegally pass through the cell again. Then we check if we&#8217;ve formed an English word. Finally, we continue the search on paths in every direction around the cell.</p>
<pre class="brush: ruby; title: ; notranslate" title="">
Dirs = [ [-1,-1], [-1,0], [-1,1], [0,-1], [0,1], [1,-1], [1,0], [1,1] ]
def solve(x, y, sofar)
  Prev[x][y]=true               # Mark our turf

  wd = sofar + Bd[x][y]
  Found[wd]=true if Words[wd]   # count the new word
  
  Dirs.each do |dx, dy|
    next unless (0..3)===(x+dx) # are we still
    next unless (0..3)===(y+dy) # on the board?
    next if Prev[x+dx][y+dy]    # have we been here before?
    solve(x+dx,y+dy,wd)         # keep going!
  end
  
  Prev[x][y] = false            # We're done here
end
</pre>
<p>When Ruby sees a single array like <code>[1,0]</code> passed into a block with two parameters, it automatically expands the array to match the params, which is almost always exactly what you want. The recursion bottoms out when we got trapped in a cell:  <code>Prev[x+dx][y+dy]</code> is set on each iteration of the loop that lands on the board.</p>
<p>That funky <code>===</code> operator is the range inclusion operator. The statement <code>(a..b)===x</code> is entirely equivalent to <code>a<=x &#038;&#038; x<=b</code>.</p>
<p>Finally we need to start the search from each cell and tally up the score:</p>
<pre class="brush: ruby; title: ; notranslate" title="">
(0..15).each { |i| solve(i/4, i%4, &quot;&quot;) }

# Length: 0, 1, 2, 3, 4, 5, 6, 7, 8, 9,10,11,12,13,14,15,16,17
Scores = [0, 0, 0, 1, 1, 2, 3, 5,11,11,11,11,11,11,11,11,11,11]
puts Found.keys.inject(0) { |sum,w| sum + Scores[w.length] }
</pre>
<p>The <code>Enumerable.inject</code> method is like <code>foldr</code> in functional languages or <code>accumulate</code> in the C++ STL. It takes a starting value (<code>0</code> in this case) and an action on that value for each item in the enumeration.</p>
<p>And that, my friends, is a complete Boggle solver! How fast is this? Here's a few sample runs on my MacBook Pro:</p>
<pre>$ time ruby short.rb a b c d e f g h i j k l m n o p
18

real    4m11.836s
user    4m8.601s
sys     0m0.777s
$ time ruby short.rb c a t d l i n e m a r o p e t s
2338

real    4m12.465s
user    4m8.631s
sys     0m0.866s</pre>
<p>It's a strength of this algorithm that its running time is almost completely independent of the input board. But four minutes is an eternity in computer time. How much better can we do?</p>
<p>Here's the full source of the program:</p>
<pre class="brush: ruby; title: ; notranslate" title="">
# Load all 3-17 letter words into a hash for fast lookup
Words = Hash.new
IO.foreach(&quot;words&quot;) do |line|
  line =~ /^([a-z]{3,17})\b/ and Words[$1] = true
end

Found = Hash.new                            # hash of words we've found
Prev = Array.new(4) { [false] * 4 }         # where have we been already?
Bd = Array.new(4) { [0] * 4 }               # empty 4x4 array
(0..15).each { |i| Bd[i/4][i%4] = ARGV[i] }

# All the different directions [dx,dy] we can look from a cell
Dirs = [ [-1,-1], [-1,0], [-1,1], [0,-1], [0,1], [1,-1], [1,0], [1,1] ]
def solve(x, y, sofar)
  Prev[x][y]=true               # Mark our turf

  wd = sofar + Bd[x][y]
  Found[wd]=true if Words[wd]   # count the new word
  
  Dirs.each do |dx,dy|
    next unless (0..3)===(x+dx) # are we still
    next unless (0..3)===(y+dy) # on the board?
    next if Prev[x+dx][y+dy]    # have we been here before?
    solve(x+dx,y+dy,wd)         # keep going!
  end
  
  Prev[x][y] = false            # We're done here
end

# Start a depth-first search from each cell on the board
(0..15).each { |i| solve(i/4, i%4, &quot;&quot;) }

#         0, 1, 2, 3, 4, 5, 6, 7, 8, 9,10,11,12,13,14,15,16,17
Scores = [0, 0, 0, 1, 1, 2, 3, 5,11,11,11,11,11,11,11,11,11,11]
puts Found.keys.inject(0) { |sum,w| sum + Scores[w.length] }
</pre>
<p>In the spirit of <a href="http://codegolf.com/">code golf</a>, I tried to make this program as short as I possibly could. Here's the result: a 12 line, slow-as-hell Boggle solver that I won't dignify with an explanation. <a href="http://community.livejournal.com/evan_tech">Someone</a> claimed he could write a shorter one in Haskell. I'll believe it when I see it!</p>
<pre class="brush: ruby; title: ; notranslate" title="">
W, F = {}, {}
IO.foreach(&quot;words&quot;) { |l| l =~ /^([a-z]{3,17})\b/ and W[$1] = 1 }
B = Array.new(6) { [&quot;&quot;]*6 }
(0..15).each { |i| B[1+i/4][1+i%4] = ARGV[i] }
def s(x, y, w)
  p, B[x][y] = B[x][y], &quot;&quot;
  F[w+p]=true if W[w+p]
  (0..8).map{|i|[i/3-1,i%3-1]}.each {|e,f| s(x+e,y+f,w+p) if B[x+e][y+f]!=&quot;&quot;}
  B[x][y] = p
end
(0..15).each { |i| s(1+i/4, 1+i%4, &quot;&quot;) }
puts F.keys.inject(0){|s,w| s+(w.size&lt;8 ? [0,0,0,1,1,2,3,5][w.size] : 11)}
</pre>
			
			<p class="feedback">
			<a href="../../../../2007-01-30/boggle-2-the-shortest-solver/index.html" rel="bookmark" title="Permanent link to Boggle #2: The Shortest Solver" class="permalink">Permalink</a>
			<a href="../../../../2007-01-30/boggle-2-the-shortest-solver/index.html#comments" class="commentslink"  title="Comment on Boggle #2: The Shortest Solver">1 Comment</a>						</p>
			
			<!--
			<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
			xmlns:dc="http://purl.org/dc/elements/1.1/"
			xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
		<rdf:Description rdf:about="http://www.danvk.org/wp/2007-01-30/boggle-2-the-shortest-solver/"
    dc:identifier="http://www.danvk.org/wp/2007-01-30/boggle-2-the-shortest-solver/"
    dc:title="Boggle #2: The Shortest Solver"
    trackback:ping="http://www.danvk.org/wp/2007-01-30/boggle-2-the-shortest-solver/trackback/" />
</rdf:RDF>			-->

			</div>
	
				
		<div class="post">

			<h1 class="storydate">01.28.07</h1> 
			<h2 id="post-67" class="storytitle"><a href="../../../../2007-01-28/boggle/index.html" rel="bookmark" title="Permanent link to Boggle!">Boggle!</a></h2>
			<p class="meta">Posted in <a href="../../../boggle/index.html" title="View all posts in boggle" rel="category tag">boggle</a>, <a href="../../index.html" title="View all posts in programming" rel="category tag">programming</a> at 11:17 pm by danvk</p>
		
							<p>After showing <a href="http://community.livejournal.com/evan_tech/215395.html">Evan</a> my <a href="http://danvk.org/boggle.php">online boggle solver</a> at work, I was inspired to start writing some blog posts on how that program works. So here goes!</p>
<p><a href="http://www.hasbro.com/default.cfm?page=browse&amp;product_id=9619">Boggle</a> is a game by Hasbro in which you try to find words on a 4&#215;4 grid of letters. There are 16 dice with six letters apiece on them. You roll the dice into the 4&#215;4 slots and connect them to form words. The longer the words you find, the more points you get.</p>
<p><center><a href="http://danvk.org/boggle.php?quick=plsteaiertnrsges"><img src='../../../../wp-content/uploads/2007/01/air.png' alt='air.png' /></a></center></p>
<p>You can use diagonals and you can cross your own path, but you can&#8217;t use the same die twice in forming a word:</p>
<p><center><a href="http://danvk.org/boggle.php?quick=iecoqnsnetllnyia"><img src='../../../../wp-content/uploads/2007/01/inconsequentially.png' alt='inconsequentially.png' /></a></center></p>
<p>As a CS-type, it wasn&#8217;t long before I started thinking about how to write a computer program to quickly find all the words on a Boggle board. The right way to think about the board is as a bidirectional graph:</p>
<p><center><img src='../../../../wp-content/uploads/2007/01/graph.png' alt='graph.png' /></center></p>
<p>To get all sequences of letters in a graph, we can just do a <a href="http://www.rci.rutgers.edu/~cfs/472_html/AI_SEARCH/SearchAnimations.html">depth-first search</a>. There will be a <i>ton</i> of these sequences, but most of them will be phrases like &#8220;aefbg&#8221; that aren&#8217;t real English words. So we&#8217;ll also need a dictionary to filter out the non-words. Then it&#8217;s just a matter of scoring:</p>
<table>
<tr>
<th>Length</th>
<th>Score</th>
</tr>
<tr>
<td>1-2</td>
<td>0</td>
</tr>
<tr>
<td>3-4</td>
<td>1</td>
</tr>
<tr>
<td>5</td>
<td>2</td>
</tr>
<tr>
<td>6</td>
<td>3</td>
</tr>
<tr>
<td>7</td>
<td>5</td>
</tr>
<tr>
<td>8-17</td>
<td>11</td>
</tr>
</table>
<p>Seventeen letter words <i>are</i> possible! Just look at the &#8216;inconsequentially&#8217; board above. The &#8220;qu&#8221; die is a minor nuisance that&#8217;ll keep coming up. It&#8217;s the only die that doesn&#8217;t have just one character on each face.</p>
<p>Next time we&#8217;ll code up a solution in Ruby and test its performance. After that, we&#8217;ll start looking at optimizations and how to find the highest-scoring Boggle board.</p>
			
			<p class="feedback">
			<a href="../../../../2007-01-28/boggle/index.html" rel="bookmark" title="Permanent link to Boggle!" class="permalink">Permalink</a>
			<a href="../../../../2007-01-28/boggle/index.html#comments" class="commentslink"  title="Comment on Boggle!">1 Comment</a>						</p>
			
			<!--
			<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
			xmlns:dc="http://purl.org/dc/elements/1.1/"
			xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
		<rdf:Description rdf:about="http://www.danvk.org/wp/2007-01-28/boggle/"
    dc:identifier="http://www.danvk.org/wp/2007-01-28/boggle/"
    dc:title="Boggle!"
    trackback:ping="http://www.danvk.org/wp/2007-01-28/boggle/trackback/" />
</rdf:RDF>			-->

			</div>
	
				
		<div class="post">

			<h1 class="storydate">11.20.06</h1> 
			<h2 id="post-53" class="storytitle"><a href="../../../../2006-11-20/an-unusual-way-to-calculate-pi/index.html" rel="bookmark" title="Permanent link to An unusual way to calculate Pi">An unusual way to calculate Pi</a></h2>
			<p class="meta">Posted in <a href="../../index.html" title="View all posts in programming" rel="category tag">programming</a> at 12:17 am by danvk</p>
		
							<p> Can you figure out how this program does it?</p>
<style type="text/css">.comment { color: #999999; font-style: italic; } .pre { color: #000099; } .string { color: #009900; } .char { color: #009900; } .float { color: #996600; } .int { color: #999900; } .bool { color: #000000; font-weight: bold; } .type { color: #FF6633; } .flow { color: #FF0000; } .keyword { color: #990000; } .operator { color: #663300; font-weight: bold; }</style>
<pre><span class="pre">#include &lt;math.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;stdio.h&gt;
#include &lt;time.h&gt;
</span><span class="type">
unsigned int</span> gcd<span class="operator"> (</span><span class="type">unsigned int</span> a<span class="operator">,</span><span class="type"> unsigned int</span> b<span class="operator">)
{</span><span class="flow">
  while</span><span class="operator"> (</span>b<span class="operator">) {</span><span class="type">
    unsigned int</span> c<span class="operator"> =</span> b<span class="operator">;</span>
    b<span class="operator"> =</span> a<span class="operator"> %</span> b<span class="operator">;</span>
    a<span class="operator"> =</span> c<span class="operator">;
  }</span><span class="flow">
  return</span> a<span class="operator">;
}</span><span class="type">

int</span><span class="keyword"> main</span><span class="operator">(</span><span class="type">int</span> argc<span class="operator">,</span><span class="type"> char</span><span class="operator">**</span> argv<span class="operator">) {</span><span class="flow">
  if</span><span class="operator"> (</span>argc<span class="operator"> !=</span><span class="int"> 2</span><span class="operator">) {</span>
    fprintf<span class="operator">(</span>stderr<span class="operator">,</span><span class="string"> "Usage: %s &lt;sample size&gt;\n"</span><span class="operator">,</span> argv<span class="operator">[</span><span class="int">0</span><span class="operator">]);</span>
    exit<span class="operator">(</span><span class="int">1</span><span class="operator">);
  }</span><span class="type">
  
  unsigned int</span> sample_size<span class="operator"> =</span> atol<span class="operator">(</span>argv<span class="operator">[</span><span class="int">1</span><span class="operator">]);</span><span class="type">
  unsigned int</span> count<span class="operator"> =</span><span class="int"> 0</span><span class="operator">;</span>
  srand<span class="operator">(</span>time<span class="operator">(</span>NULL<span class="operator">));</span><span class="flow">

  for</span><span class="operator"> (</span><span class="type">unsigned int</span> i<span class="operator">=</span><span class="int">0</span><span class="operator">;</span> i<span class="operator">&lt;</span>sample_size<span class="operator">;</span> i<span class="operator">++) {</span><span class="type">
    unsigned int</span> a<span class="operator"> =</span> rand<span class="operator">();</span><span class="type">
    unsigned int</span> b<span class="operator"> =</span> rand<span class="operator">();</span><span class="flow">

    if</span><span class="operator"> (</span>gcd<span class="operator">(</span>a<span class="operator">,</span>b<span class="operator">) ==</span><span class="int"> 1</span><span class="operator">)</span>
      count<span class="operator">++;
  }</span><span class="type">

  double</span> pi<span class="operator"> =</span> sqrt<span class="operator">(</span><span class="float">6.0</span><span class="operator"> *</span> sample_size<span class="operator"> /</span> count<span class="operator">);</span>
  printf<span class="operator">(</span><span class="string">"%d: %.6f - %.6f = %.6f\n"</span><span class="operator">,</span>
          sample_size<span class="operator">,</span> pi<span class="operator">,</span> M_PI<span class="operator">,</span> fabs<span class="operator">(</span>pi<span class="operator">-</span>M_PI<span class="operator">));
}</span>
</pre>
<p>Convergence is pretty bad, probably <i>O(sqrt(log N))</i>, but it&#8217;s cool that it works!</p>
<table border=1 cellspacing=0 cellpadding=3>
<tr>
<th align=right>Input</th>
<th>Runtime</th>
<th>|Output-&pi;| = Error</th>
<tr>
<td align=right>        1,000</td>
<td align=right>0.001s</td>
<td>|3.170213 &#8211; 3.141593| = 0.028620</td>
</tr>
<tr>
<td align=right>       10,000</td>
<td align=right>0.003s</td>
<td>|3.119420 &#8211; 3.141593| = 0.022173</td>
</tr>
<tr>
<td align=right>      100,000</td>
<td align=right>0.025s</td>
<td>|3.142490 &#8211; 3.141593| = 0.006862</td>
</tr>
<tr>
<td align=right>    1,000,000</td>
<td align=right>0.243s</td>
<td>|3.140774 &#8211; 3.141593| = 0.000818</td>
</tr>
<tr>
<td align=right>   10,000,000</td>
<td align=right>2.427s</td>
<td>|3.141377 &#8211; 3.141593| = 0.000216</td>
</tr>
<tr>
<td align=right>  100,000,000</td>
<td align=right>24.256s</td>
<td>|3.141756 &#8211; 3.141593| = 0.000164</td>
</tr>
<tr>
<td align=right>1,000,000,000</td>
<td align=right>242.518s</td>
<td>|3.141692 &#8211; 3.141593| = 0.000099</td>
</tr>
</table>
<p><i>(Thanks to <a href="http://www.bedaux.net/cpp2html/">C++2HTML</a> for the syntax coloring)</i></p>
			
			<p class="feedback">
			<a href="../../../../2006-11-20/an-unusual-way-to-calculate-pi/index.html" rel="bookmark" title="Permanent link to An unusual way to calculate Pi" class="permalink">Permalink</a>
			<a href="../../../../2006-11-20/an-unusual-way-to-calculate-pi/index.html#comments" class="commentslink"  title="Comment on An unusual way to calculate Pi">1 Comment</a>						</p>
			
			<!--
			<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
			xmlns:dc="http://purl.org/dc/elements/1.1/"
			xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
		<rdf:Description rdf:about="http://www.danvk.org/wp/2006-11-20/an-unusual-way-to-calculate-pi/"
    dc:identifier="http://www.danvk.org/wp/2006-11-20/an-unusual-way-to-calculate-pi/"
    dc:title="An unusual way to calculate Pi"
    trackback:ping="http://www.danvk.org/wp/2006-11-20/an-unusual-way-to-calculate-pi/trackback/" />
</rdf:RDF>			-->

			</div>
	
		
		<p>
			<span class="post_nav"><a href="../6/index.html" >&laquo; Previous Page</a> &#8212; <a href="../8/index.html" >&laquo; Previous entries</a></span>
		<!--	<a href="http://www.danvk.org/wp/category/programming/page/6/" >&laquo; Previous Page</a> &#183; <a href="http://www.danvk.org/wp/category/programming/page/8/" >Next Page &raquo;</a>-->
			<span><a href="../6/index.html" >Next entries &raquo;</a> &#8212; <a href="../8/index.html" >Next Page &raquo;</a></span>
		</p>
		
	
</div>

<div id="sidebar">
<ul>

	<li id="search">
		<form method="get" id="searchform" action="http://www.danvk.org/wp/index.php">
<p>
<input type="text" value="" name="s" id="s" /><br />
<input type="submit" id="searchsubmit" value="Search" />
</p>
</form>	</li> 

<!-- I want more control than this gives me: wp_list_pages('title_li=<h2>' . __('Pages') . '</h2>' ); -->

	<li class="pagenav">
		<ul>
			<!--<li class="page_item"><a href="http://www.danvk.org/wp/?page_id=2" title="About">About</a></li>-->
			<li>Dan across the web
				<ul>
					<li class="social">
					<a href="https://github.com/danvk"><img src="https://github.com/favicon.ico" width=16 height=16 border=0></a>
					<a href="https://twitter.com/danvdk"><img src="https://twitter.com/favicon.ico" width=16 height=16 border=0></a>
					<a href="https://www.facebook.com/danvdk"><img src="https://facebook.com/favicon.ico" width=16 height=16 border=0></a>
					<a href="https://plus.google.com/+DanVanderkam"><img src="https://plus.google.com/favicon.ico" width=16 height=16 border=0></a>
					<a href="https://www.linkedin.com/profile/view?id=340204755"><img src="https://www.linkedin.com/favicon.ico" width=16 height=16 border=0></a>
					<script data-gittip-username="danvdk" data-gittip-widget="button" src="http://gttp.co/v1.js"></script>
				</ul>

			<li>Dan's projects
				<ul class="projects">
					<li><a href="http://dygraphs.com/">dygraphs</a>
					<li><a href="http://oldsf.org/">OldSF</a>
					<li><a href="http://comparea.org/">Comparea</a>
					<li><a href="https://github.com/danvk/webdiff">git webdiff</a>
				</ul>

			<li>Features on this site
				<ul class="features">
					<li><a href="http://www.danvk.org/boggle.php" title="Boggle Solver">Online Boggle Solver</a></li>
					<li><a href="../../../../beals-conjecture/index.html" title="Beal&#039;s Conjecture">Beal's Conjecture</a></li>
					<li><a href="../../../../gw-basic-program-decoder/index.html" title="GW-BASIC Program Decoder">GW-BASIC Program Decoder</a></li>
					<li><a href="http://www.danvk.org/tower/nstower.html">NS-Tower in your Browser</a></li>
				</ul>
		</ul>
	</li>

	<!--
	<li id="twitter_sidebar">
		<div id="twitter_div">
		<a href="http://twitter.com/danvdk" target="_blank"><h2 class="sidebar-title">Follow me on Twitter</h2></a>
		<ul id="twitter_update_list" style="padding-right:30px"></ul>
		
		</div>
		<script type="text/javascript" src="http://twitter.com/javascripts/blogger.js"></script>
		<script type="text/javascript" src="http://twitter.com/statuses/user_timeline/danvdk.json?callback=twitterCallback2&amp;count=5"></script>
	</li>
	-->

	<li id="archives">
		<h2>Archives</h2>
		<ul>
			<li><a href='../../../../2014/10/index.html'>October 2014</a></li>
	<li><a href='../../../../2014/08/index.html'>August 2014</a></li>
	<li><a href='../../../../2014/07/index.html'>July 2014</a></li>
	<li><a href='../../../../2014/06/index.html'>June 2014</a></li>
	<li><a href='../../../../2014/03/index.html'>March 2014</a></li>
	<li><a href='../../../../2014/02/index.html'>February 2014</a></li>
	<li><a href='../../../../2014/01/index.html'>January 2014</a></li>
	<li><a href='../../../../2013/08/index.html'>August 2013</a></li>
	<li><a href='../../../../2013/06/index.html'>June 2013</a></li>
	<li><a href='../../../../2013/04/index.html'>April 2013</a></li>
	<li><a href='../../../../2013/03/index.html'>March 2013</a></li>
	<li><a href='../../../../2013/02/index.html'>February 2013</a></li>
	<li><a href='../../../../2013/01/index.html'>January 2013</a></li>
	<li><a href='../../../../2012/12/index.html'>December 2012</a></li>
	<li><a href='../../../../2012/09/index.html'>September 2012</a></li>
	<li><a href='../../../../2012/08/index.html'>August 2012</a></li>
	<li><a href='../../../../2012/07/index.html'>July 2012</a></li>
	<li><a href='../../../../2012/06/index.html'>June 2012</a></li>
	<li><a href='../../../../2012/05/index.html'>May 2012</a></li>
	<li><a href='../../../../2012/04/index.html'>April 2012</a></li>
	<li><a href='../../../../2012/02/index.html'>February 2012</a></li>
	<li><a href='../../../../2012/01/index.html'>January 2012</a></li>
	<li><a href='../../../../2011/12/index.html'>December 2011</a></li>
	<li><a href='../../../../2011/11/index.html'>November 2011</a></li>
	<li><a href='../../../../2011/08/index.html'>August 2011</a></li>
	<li><a href='../../../../2011/03/index.html'>March 2011</a></li>
	<li><a href='../../../../2010/06/index.html'>June 2010</a></li>
	<li><a href='../../../../2010/03/index.html'>March 2010</a></li>
	<li><a href='../../../../2009/12/index.html'>December 2009</a></li>
	<li><a href='../../../../2009/11/index.html'>November 2009</a></li>
	<li><a href='../../../../2009/10/index.html'>October 2009</a></li>
	<li><a href='../../../../2009/09/index.html'>September 2009</a></li>
	<li><a href='../../../../2009/08/index.html'>August 2009</a></li>
	<li><a href='../../../../2009/06/index.html'>June 2009</a></li>
	<li><a href='../../../../2009/05/index.html'>May 2009</a></li>
	<li><a href='../../../../2009/03/index.html'>March 2009</a></li>
	<li><a href='../../../../2009/02/index.html'>February 2009</a></li>
	<li><a href='../../../../2009/01/index.html'>January 2009</a></li>
	<li><a href='../../../../2008/12/index.html'>December 2008</a></li>
	<li><a href='../../../../2008/11/index.html'>November 2008</a></li>
	<li><a href='../../../../2008/10/index.html'>October 2008</a></li>
	<li><a href='../../../../2008/09/index.html'>September 2008</a></li>
	<li><a href='../../../../2008/08/index.html'>August 2008</a></li>
	<li><a href='../../../../2008/06/index.html'>June 2008</a></li>
	<li><a href='../../../../2008/05/index.html'>May 2008</a></li>
	<li><a href='../../../../2008/02/index.html'>February 2008</a></li>
	<li><a href='../../../../2008/01/index.html'>January 2008</a></li>
	<li><a href='../../../../2007/12/index.html'>December 2007</a></li>
	<li><a href='../../../../2007/11/index.html'>November 2007</a></li>
	<li><a href='../../../../2007/10/index.html'>October 2007</a></li>
	<li><a href='../../../../2007/09/index.html'>September 2007</a></li>
	<li><a href='../../../../2007/08/index.html'>August 2007</a></li>
	<li><a href='../../../../2007/07/index.html'>July 2007</a></li>
	<li><a href='../../../../2007/06/index.html'>June 2007</a></li>
	<li><a href='../../../../2007/05/index.html'>May 2007</a></li>
	<li><a href='../../../../2007/04/index.html'>April 2007</a></li>
	<li><a href='../../../../2007/03/index.html'>March 2007</a></li>
	<li><a href='../../../../2007/02/index.html'>February 2007</a></li>
	<li><a href='../../../../2007/01/index.html'>January 2007</a></li>
	<li><a href='../../../../2006/12/index.html'>December 2006</a></li>
	<li><a href='../../../../2006/11/index.html'>November 2006</a></li>
	<li><a href='../../../../2006/10/index.html'>October 2006</a></li>
	<li><a href='../../../../2006/09/index.html'>September 2006</a></li>
		</ul>
	</li>

		
	<li id="categories">
		<h2>Categories</h2>
		<ul>
			<li class="cat-item cat-item-21"><a href="../../../astronomy/index.html" title="View all posts filed under astronomy">astronomy</a>
</li>
	<li class="cat-item cat-item-10"><a href="../../../boggle/index.html" title="View all posts filed under boggle">boggle</a>
</li>
	<li class="cat-item cat-item-8"><a href="../../../books/index.html" title="View all posts filed under books">books</a>
</li>
	<li class="cat-item cat-item-23"><a href="../../../finance/index.html" title="View all posts filed under finance">finance</a>
</li>
	<li class="cat-item cat-item-27"><a href="../../../javascript/index.html" title="View all posts filed under javascript">javascript</a>
</li>
	<li class="cat-item cat-item-20"><a href="../../../math/index.html" title="View all posts filed under math">math</a>
</li>
	<li class="cat-item cat-item-13"><a href="../../../meta/index.html" title="View all posts filed under meta">meta</a>
</li>
	<li class="cat-item cat-item-19"><a href="../../../movies/index.html" title="View all posts filed under movies">movies</a>
</li>
	<li class="cat-item cat-item-11"><a href="../../../music/index.html" title="View all posts filed under music">music</a>
</li>
	<li class="cat-item cat-item-16"><a href="../../../news/index.html" title="View all posts filed under news">news</a>
</li>
	<li class="cat-item cat-item-5"><a href="../../../personal/index.html" title="View all posts filed under personal">personal</a>
</li>
	<li class="cat-item cat-item-6"><a href="../../../politics/index.html" title="View all posts filed under politics">politics</a>
</li>
	<li class="cat-item cat-item-2 current-cat"><a href="../../index.html" title="View all posts filed under programming">programming</a>
</li>
	<li class="cat-item cat-item-9"><a href="../../../reviews/index.html" title="View all posts filed under reviews">reviews</a>
</li>
	<li class="cat-item cat-item-22"><a href="../../../san-francisco/index.html" title="View all posts filed under san francisco">san francisco</a>
</li>
	<li class="cat-item cat-item-7"><a href="../../../science/index.html" title="View all posts filed under science">science</a>
</li>
	<li class="cat-item cat-item-28"><a href="../../../space/index.html" title="View all posts filed under space">space</a>
</li>
	<li class="cat-item cat-item-17"><a href="../../../sports/index.html" title="View all posts filed under sports">sports</a>
</li>
	<li class="cat-item cat-item-3"><a href="../../../tennis/index.html" title="View all posts filed under tennis">tennis</a>
</li>
	<li class="cat-item cat-item-4"><a href="../../../travel/index.html" title="View all posts filed under travel">travel</a>
</li>
	<li class="cat-item cat-item-18"><a href="../../../tv/index.html" title="View all posts filed under tv">tv</a>
</li>
	<li class="cat-item cat-item-1"><a href="../../../uncategorized/index.html" title="View all posts filed under Uncategorized">Uncategorized</a>
</li>
	<li class="cat-item cat-item-15"><a href="../../../web/index.html" title="View all posts filed under web">web</a>
</li>
	<li class="cat-item cat-item-14"><a href="../../../wikipedia/index.html" title="View all posts filed under wikipedia">wikipedia</a>
</li>
 
		</ul>
	</li>
	
			
	
	<li id="meta">
		<h2>Meta</h2>
		<ul>
				<li><a href="../../../../wp-login.html">Log in</a></li>
		<li><a href="../../../../feed/index.html" title="Syndicate this site using RSS">Entries <abbr title="Really Simple Syndication">RSS</abbr></a></li>
		<li><a href="../../../../comments/feed/index.html" title="The latest comments to all posts in RSS">Comments <abbr title="Really Simple Syndication">RSS</abbr></a></li>
		<li><a href="http://wordpress.org/" title="Powered by Wordpress, state-of-the-art semantic personal publishing platform.">Wordpress</a></li>
				</ul>
	</li>
	
</ul>
</div>

<div id="footer">

<!--<p>


Design by <a href="http://ravenkeller.com">Raven Keller</a> and <a href="http://weblogs.us" title="Theme sponsored by Weblogs.us">Weblogs.us</a>
&#183;
<a href="http://validator.w3.org/check/referer" title="This page validates as XHTML 1.0 Transitional"><abbr title="eXtensible HyperText Markup Language">XHTML</abbr></a>
&#183;
<a href="http://jigsaw.w3.org/css-validator/check/referer" title="This page validates as CSS"><abbr title="Cascading Style Sheets">CSS</abbr></a>
<img src='http://counter.dreamhost.com/cgi-bin/Count.cgi?df=danvk-maincounter.dat&pad=F&ft=0&dd=copper&istrip=T' align=right />
</p>-->


</div>

<script type='text/javascript' src='../../../../wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shCore677a.js?ver=3.0.9'></script>
<script type='text/javascript' src='../../../../wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/scripts/shBrushRuby677a.js?ver=3.0.9'></script>
<script type='text/javascript'>
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "../../../../wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shCore677a.css?ver=3.0.9";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "../../../../wp-content/plugins/syntaxhighlighter/syntaxhighlighter3/styles/shThemeDefault677a.css?ver=3.0.9";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.defaults['toolbar'] = false;
	SyntaxHighlighter.all();
</script>

<!-- Google Analytics -->
<script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-769809-1";
urchinTracker();
</script>

</body>

<!-- Mirrored from www.danvk.org/wp/category/programming/page/7/ by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 15 Oct 2014 03:35:38 GMT -->
</html>	



<!--<footer class="container"></footer>-->
